{"version":3,"file":"silentium.min.mjs","sources":["../src/Information/Information.ts","../src/Owner/Owner.ts","../src/Information/All.ts","../src/Information/Any.ts","../src/Information/Chain.ts","../src/Information/ExecutorApplied.ts","../src/Information/Filtered.ts","../src/Owner/OwnerApplied.ts","../src/Owner/OwnerExecutorApplied.ts","../src/Owner/OwnerSync.ts","../src/Information/Lazy.ts","../src/Information/Map.ts","../src/Information/Of.ts","../src/Information/Once.ts","../src/utils/OwnerPool.ts","../src/Information/Pool.ts","../src/Information/Sequence.ts","../src/Information/Stream.ts","../src/Information/FromCallback.ts","../src/Information/FromEvent.ts","../src/Information/FromPromise.ts","../src/utils/Lazy.ts","../src/utils/LazyClass.ts"],"sourcesContent":["import { Owner } from \"../Owner/Owner\";\nimport { InformationDataType } from \"../types/InformationType\";\n\ntype InfoExecutorType<T> = (g: Owner<T>) => (() => void | undefined) | void;\ntype InfoObjectType<T> = {\n  value: InfoExecutorType<T>;\n};\n\ntype InformationExecutedCb<T> = (g: Owner<T>) => void;\n\n/**\n * Main information representation\n * https://silentium-lab.github.io/silentium/#/en/information\n */\nexport class Information<T = any> {\n  private static instances = 0;\n  private theSubInfos: Information<unknown>[] = [];\n  private destructor?: () => void;\n  private owner?: Owner<T>;\n  private executedCbs?: InformationExecutedCb<T>[];\n  private alreadyExecuted = false;\n\n  public constructor(\n    private info?:\n      | InfoObjectType<T>\n      | InfoExecutorType<T>\n      | InformationDataType<T>,\n    private theName = \"unknown\",\n    private onlyOneOwner = true,\n  ) {\n    Information.instances += 1;\n  }\n\n  /**\n   * Следующее значение источника\n   */\n  private next(value: T) {\n    if (this.owner !== undefined) {\n      this.owner.give(value);\n    }\n    return this;\n  }\n\n  /**\n   * Возможность гостю получить информацию от источника\n   */\n  public value(owner: Owner<T>) {\n    if (this.onlyOneOwner && this.owner !== undefined) {\n      throw new Error(`owner already connected to info ${this.name()}`);\n    }\n\n    this.owner = owner;\n    if (this.executedCbs !== undefined && !this.alreadyExecuted) {\n      this.executedCbs.forEach((cb) => cb(owner));\n      this.alreadyExecuted = true;\n    }\n\n    if (this.info === undefined) {\n      return this;\n    }\n\n    if (typeof this.info === \"function\") {\n      const mbDestructor = this.info(owner);\n      if (\n        this.destructor === undefined &&\n        mbDestructor !== undefined &&\n        this.info !== mbDestructor &&\n        typeof mbDestructor === \"function\"\n      ) {\n        this.destructor = mbDestructor as () => void;\n      }\n    } else if (\n      typeof this.info === \"object\" &&\n      this.info !== null &&\n      \"value\" in this.info &&\n      typeof this.info.value === \"function\"\n    ) {\n      this.info.value(owner);\n    } else {\n      this.next(this.info as T);\n    }\n\n    return this;\n  }\n\n  /**\n   * Ability to destroy the information info\n   */\n  public destroy() {\n    while (this.theSubInfos.length > 0) {\n      const subInfo = this.theSubInfos.shift();\n      subInfo?.destroy();\n    }\n    if (this.destructor) {\n      this.destructor();\n    }\n    this.owner = undefined;\n    this.executedCbs = undefined;\n    this.destructor = undefined;\n    return this;\n  }\n\n  /**\n   * The ability to link another info to the current info\n   */\n  public subInfo(info: Information<any>) {\n    this.theSubInfos.push(info);\n    return this;\n  }\n\n  public subInfos() {\n    return this.theSubInfos;\n  }\n\n  public name() {\n    return `#info_${this.theName}_${Information.instances}`;\n  }\n\n  public executed(cb: InformationExecutedCb<T>) {\n    if (!this.executedCbs) {\n      this.executedCbs = [];\n    }\n    this.executedCbs.push(cb);\n    if (this.alreadyExecuted && this.owner !== undefined) {\n      cb(this.owner);\n    }\n    return this;\n  }\n\n  public hasOwner(): boolean {\n    return !!this.owner;\n  }\n}\n\nexport const I = <T>(\n  info?: InfoObjectType<T> | InfoExecutorType<T> | InformationDataType<T>,\n  theName = \"unknown\",\n  onlyOneOwner = true,\n) => new Information(info, theName, onlyOneOwner);\n","import { OwnerExecutorType } from \"../types/OwnerType\";\n\n/**\n * Information owner, if information\n * has owner than information executed\n * https://silentium-lab.github.io/silentium/#/en/owner\n */\nexport class Owner<T = any> {\n  public constructor(\n    private ownerFn: OwnerExecutorType<T>,\n    private errorFn?: (cause: unknown) => void,\n    private disposedFn?: () => boolean,\n  ) {}\n\n  public give(value: T) {\n    if (!this.disposed()) {\n      this.ownerFn(value);\n    }\n    return this;\n  }\n\n  public error(cause: unknown) {\n    if (this.errorFn !== undefined) {\n      this.errorFn(cause);\n    }\n\n    return this;\n  }\n\n  public disposed() {\n    return this.disposedFn !== undefined ? this.disposedFn() : false;\n  }\n}\n\nexport const O = <T>(ownerFn: OwnerExecutorType<T>) => new Owner(ownerFn);\n","import { Owner } from \"../Owner/Owner\";\nimport { InformationType } from \"../types/InformationType\";\nimport { Information } from \"./Information\";\n\ntype ExtractType<T> = T extends InformationType<infer U> ? U : never;\ntype ExtractTypeS<T> = T extends Information<infer U> ? U : never;\n\nexport type ExtractTypesFromArray<T extends InformationType<any>[]> = {\n  [K in keyof T]: ExtractType<T[K]>;\n};\n\nexport type ExtractTypesFromArrayS<T extends Information<any>[]> = {\n  [K in keyof T]: ExtractTypeS<T[K]>;\n};\n\n/**\n * Combines multiple information sources into a single unified source\n * represented as an array containing values from all sources\n * https://silentium-lab.github.io/silentium/#/en/information/all\n */\nexport const all = <const T extends Information[]>(...infos: T) => {\n  const i = new Information<ExtractTypesFromArrayS<T>>((g) => {\n    const keysKnown = new Set<string>(Object.keys(infos));\n    const keysFilled = new Set();\n    const isAllFilled = () => {\n      return keysFilled.size > 0 && keysFilled.size === keysKnown.size;\n    };\n    const result: Record<string, unknown> = {};\n\n    Object.entries(infos).forEach(([key, info]) => {\n      i.subInfo(info);\n      keysKnown.add(key);\n      info.value(\n        new Owner((v) => {\n          keysFilled.add(key);\n          result[key] = v;\n          if (isAllFilled()) {\n            g.give(Object.values(result) as ExtractTypesFromArrayS<T>);\n          }\n        }),\n      );\n    });\n  });\n\n  return i;\n};\n","import { I, Information } from \"./Information\";\n\n/**\n * From a set of information sources we get\n * a common response from any source for a single owner\n * https://silentium-lab.github.io/silentium/#/en/information/any\n */\nexport const any = <T>(...infos: Information<T>[]) => {\n  const info = I((g) => {\n    infos.forEach((info) => {\n      info.value(g);\n      info.subInfo(info);\n    });\n  });\n\n  return info;\n};\n","import { O, Owner } from \"../Owner/Owner\";\nimport { I, Information } from \"./Information\";\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ntype Last<T extends any[]> = T extends [...infer U, infer L] ? L : never;\n\n/**\n * The set of information sources forms a sequential chain where each source provides\n * an answer. The final answer will be the output result. If any source in the chain\n * provides a new answer, the component's overall response will be repeated.\n * https://silentium-lab.github.io/silentium/#/en/information/applied\n */\nexport const chain = <T extends Information[]>(\n  ...infos: T\n): Information<Last<T>> => {\n  let theOwner: Owner<Last<T>> | undefined;\n  let lastValue: Last<T> | undefined;\n  const respondedI = new WeakMap();\n\n  const handleI = (index: number) => {\n    const info = infos[index];\n    const nextI = infos[index + 1];\n\n    info.value(\n      O((v) => {\n        if (!nextI) {\n          lastValue = v;\n          theOwner?.give(v);\n        }\n\n        if (nextI && lastValue !== undefined && theOwner !== undefined) {\n          theOwner.give(lastValue);\n        }\n\n        if (nextI && !respondedI.has(info)) {\n          handleI(index + 1);\n        }\n\n        respondedI.set(info, 1);\n      }),\n    );\n  };\n\n  const info = I<Last<T>>((g) => {\n    theOwner = g;\n  });\n\n  info.executed(() => {\n    handleI(0);\n  });\n\n  return info;\n};\n","import { Owner } from \"../Owner/Owner\";\nimport { Information } from \"./Information\";\n\n/**\n * Information to which a function is applied in order\n * to control the value passing process\n * https://silentium-lab.github.io/silentium/#/en/information/applied\n */\nexport const executorApplied = <T>(\n  base: Information<T>,\n  applier: (executor: Owner<T>) => Owner<T>,\n) => {\n  const i = new Information<T>((g) => {\n    base.value(applier(g));\n  });\n  i.subInfo(base);\n\n  return i;\n};\n","import { O } from \"../Owner/Owner\";\nimport { Information } from \"./Information\";\n\n/**\n * Information whose value is being validated\n * via a predicate; if the predicate returns true, the value\n * can be passed to the output\n * https://silentium-lab.github.io/silentium/#/en/information/filtered\n */\nexport const filtered = <T>(\n  base: Information<T>,\n  predicate: (v: T) => boolean,\n  defaultValue?: T,\n) => {\n  return new Information<T>((g) => {\n    base.value(\n      O((v) => {\n        if (predicate(v)) {\n          g.give(v);\n        } else if (defaultValue !== undefined) {\n          g.give(defaultValue);\n        }\n      }),\n    );\n  }).subInfo(base);\n};\n","import { Owner } from \"./Owner\";\n\n/**\n * Owner to which a function is applied that modifies the incoming\n * value it receives\n * https://silentium-lab.github.io/silentium/#/en/owner/applied\n */\nexport const ownerApplied = <T, R>(\n  base: Owner<R>,\n  applier: (value: T) => R,\n) => {\n  return new Owner<T>(\n    (v) => {\n      base.give(applier(v));\n    },\n    (cause) => {\n      base.error(cause);\n    },\n    () => base.disposed(),\n  );\n};\n","import { Owner } from \"./Owner\";\n\n/**\n * Owner to which the function is applied that\n * controls the conditions for passing the value\n * https://silentium-lab.github.io/silentium/#/en/owner/executor-applied\n */\nexport const ownerExecutorApplied = <T>(\n  base: Owner<T>,\n  applier: (ge: (v: T) => void) => (v: T) => void,\n) => {\n  const executor = applier((v) => base.give(v));\n  return new Owner<T>((v) => {\n    executor(v);\n  });\n};\n","import { Information } from \"../Information\";\nimport { O } from \".\";\n\nexport interface infoSync<T> {\n  syncValue(): T;\n}\n\n/**\n * Owner that can return a synchronous value\n * from the information passed to it. If there is no value and no\n * defaultValue, an error will occur\n * https://silentium-lab.github.io/silentium/#/en/owner/sync\n */\nexport const ownerSync = <T>(\n  base: Information<T>,\n  defaultValue?: T,\n): infoSync<T> => {\n  let lastValue: T | undefined;\n\n  base.value(\n    O((v) => {\n      lastValue = v;\n    }),\n  );\n\n  return {\n    syncValue() {\n      if (lastValue === undefined && defaultValue === undefined) {\n        throw new Error(\"info sync is empty\");\n      }\n      return (lastValue || defaultValue) as T;\n    },\n  };\n};\n","import { O } from \"../Owner\";\nimport { LazyType } from \"../types/LazyType\";\nimport { Information } from \"./Information\";\n\n/**\n * Helps in the process of executing information to create\n * a new information object and also destroy it if\n * destruction information is received\n * https://silentium-lab.github.io/silentium/#/en/information/lazy\n */\nexport const lazyS = <T>(\n  lazyI: LazyType<Information<T>>,\n  destroyI?: Information<unknown>,\n) => {\n  const info = new Information<T>((g) => {\n    const instance = lazyI.get();\n    info.subInfo(instance);\n    instance.value(g);\n  });\n\n  if (destroyI) {\n    info.subInfo(destroyI);\n    destroyI.value(\n      O(() => {\n        info.destroy();\n      }),\n    );\n  }\n\n  return info;\n};\n","import { InformationDataType } from \"../types\";\nimport { O } from \"../Owner/Owner\";\nimport { LazyType } from \"../types/LazyType\";\nimport { all } from \"./All\";\nimport { I, Information } from \"./Information\";\n\n/**\n * Component that applies an info object constructor to each data item,\n * producing an information source with new values\n * https://silentium-lab.github.io/silentium/#/en/information/map\n */\nexport const map = <T, TG>(\n  base: Information<T[]>,\n  targetI: LazyType<Information<TG>>,\n) => {\n  const i = new Information<TG[]>((g) => {\n    base.value(\n      O((v) => {\n        const infos: Information<TG>[] = [];\n        v.forEach((val) => {\n          let valInfo: Information<T> | T = val;\n          if (!(valInfo instanceof Information)) {\n            valInfo = I(val as InformationDataType<T>);\n          }\n          const info = targetI.get(valInfo);\n          infos.push(info);\n        });\n        const allI = all(...infos).value(g);\n        i.subInfo(allI);\n      }),\n    );\n  });\n  i.subInfo(base);\n\n  return i;\n};\n","import { Owner } from \"../Owner\";\nimport { Information } from \"./Information\";\nimport { InformationDataType } from \"../types/InformationType\";\n\n/**\n * A component that allows creating linked objects of information and its owner\n * in such a way that if a new value is assigned to the owner, this value\n * will become the value of the linked information source\n * https://silentium-lab.github.io/silentium/#/en/information/of\n */\nexport const of = <T>(incomeI?: InformationDataType<T>) => {\n  let sharedValue = incomeI as T;\n  let relatedO: Owner<T> | undefined;\n\n  const notifyO = () => {\n    if (relatedO !== undefined) {\n      relatedO.give(sharedValue);\n    }\n  };\n\n  const info = new Information<T>((g) => {\n    relatedO = g;\n    if (sharedValue !== undefined && sharedValue !== null) {\n      notifyO();\n    }\n  }, \"of\");\n\n  return [\n    info,\n    new Owner<T>((v) => {\n      sharedValue = v;\n      notifyO();\n    }),\n  ] as const;\n};\n","import { O } from \"../Owner\";\nimport { Information } from \"./Information\";\n\n/**\n * Limits the number of values from the information source\n * to a single value - once the first value is emitted, no more\n * values are delivered from the source\n * https://silentium-lab.github.io/silentium/#/en/information/once\n */\nexport const once = <T>(base: Information<T>) => {\n  const info = new Information<T>((g) => {\n    let isFilled = false;\n    base.value(\n      O((v) => {\n        if (!isFilled) {\n          isFilled = true;\n          g.give(v);\n        }\n      }),\n    );\n  });\n  info.subInfo(base);\n\n  return info;\n};\n","import { Owner } from \"../Owner\";\n\n/**\n * Helps maintain an owner list allowing different\n * owners to get information from a common source\n * https://silentium-lab.github.io/silentium/#/en/utils/owner-pool\n */\nexport class OwnerPool<T> {\n  private owners: Set<Owner<T>>;\n  private innerOwner: Owner<T>;\n\n  public constructor() {\n    this.owners = new Set<Owner<T>>();\n    this.innerOwner = new Owner(\n      (v) => {\n        this.owners.forEach((g) => {\n          g.give(v);\n        });\n      },\n      (cause) => {\n        this.owners.forEach((g) => {\n          g.error(cause);\n        });\n      },\n    );\n  }\n\n  public owner() {\n    return this.innerOwner;\n  }\n\n  public size(): number {\n    return this.owners.size;\n  }\n\n  public has(owner: Owner<T>): boolean {\n    return this.owners.has(owner);\n  }\n\n  public add(shouldBePatron: Owner<T>) {\n    this.owners.add(shouldBePatron);\n    return this;\n  }\n\n  public remove(g: Owner<T>) {\n    this.owners.delete(g);\n    return this;\n  }\n\n  public destroy() {\n    this.owners.forEach((g) => {\n      this.remove(g);\n    });\n    return this;\n  }\n}\n","import { Owner } from \"../Owner\";\nimport { Information } from \"./Information\";\nimport { OwnerPool } from \"../utils/OwnerPool\";\n\n/**\n * An information object that helps multiple owners access\n * a single another information object\n * https://silentium-lab.github.io/silentium/#/en/information/pool\n */\nexport const pool = <T>(base: Information<T>) => {\n  const ownersPool = new OwnerPool<T>();\n  let lastValue: T | undefined;\n\n  const i = new Information<T>(\n    (g) => {\n      if (lastValue !== undefined && !ownersPool.has(g)) {\n        g.give(lastValue);\n      }\n      ownersPool.add(g);\n\n      return () => {\n        ownersPool.destroy();\n      };\n    },\n    \"pool\",\n    false,\n  );\n  i.subInfo(base);\n\n  i.executed(() => {\n    const gp = ownersPool.owner();\n    base.value(\n      new Owner((v) => {\n        gp.give(v);\n        lastValue = v;\n      }),\n    );\n  });\n\n  return [i, ownersPool] as const;\n};\n","import { I, Information } from \"../Information\";\nimport { O } from \"../Owner\";\n\n/**\n * A component that takes one value at a time and returns an array\n * https://silentium-lab.github.io/silentium/#/en/information/sequence\n */\nexport const sequence = <T>(base: Information<T>): Information<T[]> => {\n  const i = I<T[]>((o) => {\n    const result: T[] = [];\n\n    base.value(\n      O((v) => {\n        result.push(v);\n        o.give(result);\n      }),\n    );\n  });\n  i.subInfo(base);\n\n  return i;\n};\n","import { I, Information } from \"../Information\";\nimport { O } from \"../Owner\";\n\n/**\n * Component that receives a data array and yields values one by one\n * https://silentium-lab.github.io/silentium/#/en/information/stream\n */\nexport const stream = <T>(base: Information<T[]>): Information<T> => {\n  const i = I<T>((o) => {\n    base.value(\n      O((v) => {\n        v.forEach((cv) => {\n          o.give(cv);\n        });\n      }),\n    );\n  });\n\n  return i;\n};\n","import { I } from \"../Information\";\n\n/**\n * When receiving a reference to a function expecting a callback, the component\n * creates its own callback, and the data received in this callback\n * will become the value of the information object\n * https://silentium-lab.github.io/silentium/#/en/information/from-callback\n */\nexport const fromCallback = <T>(waitForCb: (cb: (v: T) => any) => unknown) => {\n  return I((o) => {\n    waitForCb((v) => {\n      o.give(v);\n    });\n  });\n};\n","import { I } from \"../Information\";\n\n/**\n * A component that receives data from an event and\n * presents it as an information object\n * https://silentium-lab.github.io/silentium/#/en/information/from-event\n */\nexport const fromEvent = <T extends []>(\n  emitter: any,\n  eventName: string,\n  subscribeMethod: string,\n  unsubscribeMethod?: string,\n) => {\n  return I((o) => {\n    const handler = (...args: T) => {\n      o.give(args);\n    };\n    emitter[subscribeMethod](eventName, handler);\n    return () => {\n      if (unsubscribeMethod !== undefined) {\n        emitter[unsubscribeMethod](eventName, handler);\n      }\n    };\n  });\n};\n","import { I, Information } from \"../Information/Information\";\n\n/**\n * Component that gets a value from a promise and\n * presents it as information\n * https://silentium-lab.github.io/silentium/#/en/information/from-promise\n */\nexport const fromPromise = <T>(p: Promise<T>): Information<T> => {\n  return I((o) => {\n    p.then((v) => {\n      o.give(v);\n    }).catch((e) => {\n      o.error(e);\n    });\n  });\n};\n","import { LazyType } from \"../types/LazyType\";\n\n/**\n * Helps to get lazy instance of dependency\n * @url https://silentium-lab.github.io/silentium/#/utils/lazy\n */\nexport const lazy = <T>(buildingFn: (...args: any[]) => T): LazyType<T> => {\n  if (buildingFn === undefined) {\n    throw new Error(\"lazy didn't receive buildingFn argument\");\n  }\n\n  return {\n    get<R extends unknown[], CT = null>(...args: R): CT extends null ? T : CT {\n      return buildingFn(...args) as CT extends null ? T : CT;\n    },\n  };\n};\n","import { LazyType } from \"../types/LazyType\";\n\ninterface Constructable<T> {\n  new (...args: unknown[]): T;\n}\n\ninterface Prototyped<T> {\n  prototype: T;\n}\n\n/**\n * Helps create an object from a class\n * https://silentium-lab.github.io/silentium/#/en/utils/lazy-class\n */\nexport const lazyClass = <T>(\n  constructorFn: Prototyped<T>,\n  modules: Record<string, unknown> = {},\n): LazyType<T> => {\n  if (constructorFn === undefined) {\n    throw new Error(\"PrivateClass didn't receive constructorFn argument\");\n  }\n\n  return {\n    get<R extends unknown[], CT = null>(...args: R): CT extends null ? T : CT {\n      return new (constructorFn as Constructable<T>)(\n        ...args,\n        modules,\n      ) as CT extends null ? T : CT;\n    },\n  };\n};\n"],"names":["_Information","constructor","info","theName","onlyOneOwner","this","__publicField","instances","next","value","owner","give","Error","name","executedCbs","alreadyExecuted","forEach","cb","mbDestructor","destructor","destroy","theSubInfos","length","subInfo","shift","push","subInfos","executed","hasOwner","Information","I","Owner","ownerFn","errorFn","disposedFn","disposed","error","cause","O","all","infos","i","g","keysKnown","Set","Object","keys","keysFilled","result","entries","key","add","v","size","values","any","chain","theOwner","lastValue","respondedI","WeakMap","handleI","index","nextI","has","set","executorApplied","base","applier","filtered","predicate","defaultValue","ownerApplied","ownerExecutorApplied","executor","ownerSync","syncValue","lazyS","lazyI","destroyI","instance","get","map","targetI","val","valInfo","allI","of","incomeI","relatedO","sharedValue","notifyO","once","isFilled","OwnerPool","owners","innerOwner","shouldBePatron","remove","delete","pool","ownersPool","gp","sequence","o","stream","cv","fromCallback","waitForCb","fromEvent","emitter","eventName","subscribeMethod","unsubscribeMethod","handler","args","fromPromise","p","then","catch","e","lazy","buildingFn","lazyClass","constructorFn","modules"],"mappings":"0JAcO,MAAMA,EAAN,MAAMA,EAQJ,WAAAC,CACGC,EAIAC,EAAU,UACVC,GAAe,GALfC,KAAAH,KAAAA,EAIAG,KAAAF,QAAAA,EACAE,KAAAD,aAAAA,EAZVE,EAAAD,KAAQ,cAAsC,IACtCC,EAAAD,KAAA,cACAC,EAAAD,KAAA,SACAC,EAAAD,KAAA,eACRC,EAAAD,KAAQ,mBAAkB,GAUxBL,EAAYO,WAAa,CAAA,CAMnB,IAAAC,CAAKC,GAIJ,YAHY,IAAfJ,KAAKK,OACFL,KAAAK,MAAMC,KAAKF,GAEXJ,IAAA,CAMF,KAAAI,CAAMC,GACX,GAAIL,KAAKD,mBAA+B,IAAfC,KAAKK,MAC5B,MAAM,IAAIE,MAAM,mCAAmCP,KAAKQ,UAStD,GANJR,KAAKK,MAAQA,OACY,IAArBL,KAAKS,aAA8BT,KAAKU,kBAC1CV,KAAKS,YAAYE,SAASC,GAAOA,EAAGP,KACpCL,KAAKU,iBAAkB,QAGP,IAAdV,KAAKH,KACA,OAAAG,KAGL,GAAqB,mBAAdA,KAAKH,KAAqB,CAC7B,MAAAgB,EAAeb,KAAKH,KAAKQ,QAET,IAApBL,KAAKc,iBACY,IAAjBD,GACAb,KAAKH,OAASgB,GACU,mBAAjBA,IAEPb,KAAKc,WAAaD,EACpB,KAEqB,iBAAdb,KAAKH,MACE,OAAdG,KAAKH,MACL,UAAWG,KAAKH,MACW,mBAApBG,KAAKH,KAAKO,MAEZJ,KAAAH,KAAKO,MAAMC,GAEXL,KAAAG,KAAKH,KAAKH,MAGV,OAAAG,IAAA,CAMF,OAAAe,GACE,KAAAf,KAAKgB,YAAYC,OAAS,GAAG,CAC5B,MAAAC,EAAUlB,KAAKgB,YAAYG,QACjCD,GAASH,SAAQ,CAQZ,OANHf,KAAKc,YACPd,KAAKc,aAEPd,KAAKK,WAAQ,EACbL,KAAKS,iBAAc,EACnBT,KAAKc,gBAAa,EACXd,IAAA,CAMF,OAAAkB,CAAQrB,GAEN,OADFG,KAAAgB,YAAYI,KAAKvB,GACfG,IAAA,CAGF,QAAAqB,GACL,OAAOrB,KAAKgB,WAAA,CAGP,IAAAR,GACL,MAAO,SAASR,KAAKF,WAAWH,EAAYO,WAAS,CAGhD,QAAAoB,CAASV,GAQP,OAPFZ,KAAKS,cACRT,KAAKS,YAAc,IAEhBT,KAAAS,YAAYW,KAAKR,GAClBZ,KAAKU,sBAAkC,IAAfV,KAAKK,OAC/BO,EAAGZ,KAAKK,OAEHL,IAAA,CAGF,QAAAuB,GACE,QAAEvB,KAAKK,KAAA,GAnHhBJ,EADWN,EACI,YAAY,GADtB,IAAM6B,EAAN7B,EAwHM,MAAA8B,EAAI,CACf5B,EACAC,EAAU,UACVC,GAAe,IACZ,IAAIyB,EAAY3B,EAAMC,EAASC,GCnI7B,MAAM2B,EACJ,WAAA9B,CACG+B,EACAC,EACAC,GAFA7B,KAAA2B,QAAAA,EACA3B,KAAA4B,QAAAA,EACA5B,KAAA6B,WAAAA,CAAA,CAGH,IAAAvB,CAAKF,GAIH,OAHFJ,KAAK8B,YACR9B,KAAK2B,QAAQvB,GAERJ,IAAA,CAGF,KAAA+B,CAAMC,GAKJ,YAJc,IAAjBhC,KAAK4B,SACP5B,KAAK4B,QAAQI,GAGRhC,IAAA,CAGF,QAAA8B,GACL,YAA2B,IAApB9B,KAAK6B,YAA2B7B,KAAK6B,YAAe,EAIxD,MAAMI,EAAQN,GAAkC,IAAID,EAAMC,GCdpDO,EAAM,IAAmCC,KACpD,MAAMC,EAAI,IAAIZ,GAAwCa,IACpD,MAAMC,EAAY,IAAIC,IAAYC,OAAOC,KAAKN,IACxCO,MAAiBH,IAIjBI,EAAkC,CAAC,EAElCH,OAAAI,QAAQT,GAAOxB,SAAQ,EAAEkC,EAAKhD,MACnCuC,EAAElB,QAAQrB,GACVyC,EAAUQ,IAAID,GACThD,EAAAO,MACH,IAAIsB,GAAOqB,IACTL,EAAWI,IAAID,GACfF,EAAOE,GAAOE,EAVXL,EAAWM,KAAO,GAAKN,EAAWM,OAASV,EAAUU,MAYtDX,EAAE/B,KAAKkC,OAAOS,OAAON,GAAoC,IAG/D,GACD,IAGI,OAAAP,CAAA,ECrCIc,EAAM,IAAOf,IACXV,GAAGY,IACRF,EAAAxB,SAASd,IACbA,EAAKO,MAAMiC,GACXxC,EAAKqB,QAAQrB,EAAI,GAClB,ICAQsD,EAAQ,IAChBhB,KAEC,IAAAiB,EACAC,EACE,MAAAC,MAAiBC,QAEjBC,EAAWC,IACT5D,MAAAA,EAAOsC,EAAMsB,GACbC,EAAQvB,EAAMsB,EAAQ,GAE5B5D,EAAKO,MACH6B,GAAGc,IACIW,IACSL,EAAAN,EACZK,GAAU9C,KAAKyC,IAGbW,QAAuB,IAAdL,QAAwC,IAAbD,GACtCA,EAAS9C,KAAK+C,GAGZK,IAAUJ,EAAWK,IAAI9D,IAC3B2D,EAAQC,EAAQ,GAGPH,EAAAM,IAAI/D,EAAM,EAAC,IAE1B,EAGIA,EAAO4B,GAAYY,IACZe,EAAAf,CAAA,IAON,OAJPxC,EAAKyB,UAAS,KACZkC,EAAQ,EAAC,IAGJ3D,CAAA,EC3CIgE,EAAkB,CAC7BC,EACAC,KAEA,MAAM3B,EAAI,IAAIZ,GAAgBa,IACvByB,EAAA1D,MAAM2D,EAAQ1B,GAAE,IAIhB,OAFPD,EAAElB,QAAQ4C,GAEH1B,CAAA,ECRI4B,EAAW,CACtBF,EACAG,EACAC,IAEO,IAAI1C,GAAgBa,IACpByB,EAAA1D,MACH6B,GAAGc,IACGkB,EAAUlB,GACZV,EAAE/B,KAAKyC,QACmB,IAAjBmB,GACT7B,EAAE/B,KAAK4D,EAAY,IAGzB,IACChD,QAAQ4C,GCjBAK,EAAe,CAC1BL,EACAC,IAEO,IAAIrC,GACRqB,IACMe,EAAAxD,KAAKyD,EAAQhB,GAAE,IAErBf,IACC8B,EAAK/B,MAAMC,EAAK,IAElB,IAAM8B,EAAKhC,aCXFsC,EAAuB,CAClCN,EACAC,KAEA,MAAMM,EAAWN,GAAShB,GAAMe,EAAKxD,KAAKyC,KACnC,OAAA,IAAIrB,GAAUqB,IACnBsB,EAAStB,EAAC,GACX,ECDUuB,EAAY,CACvBR,EACAI,KAEI,IAAAb,EAQG,OANFS,EAAA1D,MACH6B,GAAGc,IACWM,EAAAN,CAAA,KAIT,CACL,SAAAwB,GACM,QAAc,IAAdlB,QAA4C,IAAjBa,EACvB,MAAA,IAAI3D,MAAM,sBAElB,OAAQ8C,GAAaa,CAAA,EAEzB,ECtBWM,EAAQ,CACnBC,EACAC,KAEA,MAAM7E,EAAO,IAAI2B,GAAgBa,IACzB,MAAAsC,EAAWF,EAAMG,MACvB/E,EAAKqB,QAAQyD,GACbA,EAASvE,MAAMiC,EAAC,IAYX,OATHqC,IACF7E,EAAKqB,QAAQwD,GACJA,EAAAtE,MACP6B,GAAE,KACApC,EAAKkB,SAAQ,MAKZlB,CAAA,EClBIgF,EAAM,CACjBf,EACAgB,KAEA,MAAM1C,EAAI,IAAIZ,GAAmBa,IAC1ByB,EAAA1D,MACH6B,GAAGc,IACD,MAAMZ,EAA2B,GAC/BY,EAAApC,SAASoE,IACT,IAAIC,EAA8BD,EAC5BC,aAAmBxD,IACvBwD,EAAUvD,EAAEsD,IAER,MAAAlF,EAAOiF,EAAQF,IAAII,GACzB7C,EAAMf,KAAKvB,EAAI,IAEjB,MAAMoF,EAAO/C,KAAOC,GAAO/B,MAAMiC,GACjCD,EAAElB,QAAQ+D,EAAI,IAElB,IAIK,OAFP7C,EAAElB,QAAQ4C,GAEH1B,CAAA,ECxBI8C,EAASC,IACpB,IACIC,EADAC,EAAcF,EAGlB,MAAMG,EAAU,UACG,IAAbF,GACFA,EAAS9E,KAAK+E,EAAW,EAWtB,MAAA,CAPM,IAAI7D,GAAgBa,IACpB+C,EAAA/C,EACPgD,SACMC,GAAA,GAET,MAID,IAAI5D,GAAUqB,IACEsC,EAAAtC,EACNuC,GAAA,IAEZ,ECxBWC,EAAWzB,IACtB,MAAMjE,EAAO,IAAI2B,GAAgBa,IAC/B,IAAImD,GAAW,EACV1B,EAAA1D,MACH6B,GAAGc,IACIyC,IACQA,GAAA,EACXnD,EAAE/B,KAAKyC,GAAC,IAGd,IAIK,OAFPlD,EAAKqB,QAAQ4C,GAENjE,CAAA,4JChBF,MAAM4F,EAIJ,WAAA7F,GAHCK,EAAAD,KAAA,UACAC,EAAAD,KAAA,cAGDA,KAAA0F,WAAanD,IAClBvC,KAAK2F,WAAa,IAAIjE,GACnBqB,IACM/C,KAAA0F,OAAO/E,SAAS0B,IACnBA,EAAE/B,KAAKyC,EAAC,GACT,IAEFf,IACMhC,KAAA0F,OAAO/E,SAAS0B,IACnBA,EAAEN,MAAMC,EAAK,GACd,GAEL,CAGK,KAAA3B,GACL,OAAOL,KAAK2F,UAAA,CAGP,IAAA3C,GACL,OAAOhD,KAAK0F,OAAO1C,IAAA,CAGd,GAAAW,CAAItD,GACF,OAAAL,KAAK0F,OAAO/B,IAAItD,EAAK,CAGvB,GAAAyC,CAAI8C,GAEF,OADF5F,KAAA0F,OAAO5C,IAAI8C,GACT5F,IAAA,CAGF,MAAA6F,CAAOxD,GAEL,OADFrC,KAAA0F,OAAOI,OAAOzD,GACZrC,IAAA,CAGF,OAAAe,GAIE,OAHFf,KAAA0F,OAAO/E,SAAS0B,IACnBrC,KAAK6F,OAAOxD,EAAC,IAERrC,IAAA,EC5CE,MAAA+F,EAAWjC,IAChB,MAAAkC,EAAa,IAAIP,EACnB,IAAApC,EAEJ,MAAMjB,EAAI,IAAIZ,GACXa,SACmB,IAAdgB,GAA4B2C,EAAWrC,IAAItB,IAC7CA,EAAE/B,KAAK+C,GAET2C,EAAWlD,IAAIT,GAER,KACL2D,EAAWjF,SAAQ,IAGvB,QACA,GAcK,OAZPqB,EAAElB,QAAQ4C,GAEV1B,EAAEd,UAAS,KACH,MAAA2E,EAAKD,EAAW3F,QACjByD,EAAA1D,MACH,IAAIsB,GAAOqB,IACTkD,EAAG3F,KAAKyC,GACIM,EAAAN,CAAA,IAEhB,IAGK,CAACX,EAAG4D,EAAU,EChCVE,EAAepC,IACpB,MAAA1B,EAAIX,GAAQ0E,IAChB,MAAMxD,EAAc,GAEfmB,EAAA1D,MACH6B,GAAGc,IACDJ,EAAOvB,KAAK2B,GACZoD,EAAE7F,KAAKqC,EAAM,IAEjB,IAIK,OAFPP,EAAElB,QAAQ4C,GAEH1B,CAAA,ECbIgE,EAAatC,GACdrC,GAAM0E,IACTrC,EAAA1D,MACH6B,GAAGc,IACCA,EAAApC,SAAS0F,IACTF,EAAE7F,KAAK+F,EAAE,GACV,IAEL,ICPSC,EAAmBC,GACvB9E,GAAG0E,IACRI,GAAWxD,IACToD,EAAE7F,KAAKyC,EAAC,GACT,ICLQyD,EAAY,CACvBC,EACAC,EACAC,EACAC,IAEOnF,GAAG0E,IACF,MAAAU,EAAU,IAAIC,KAClBX,EAAE7F,KAAKwG,EAAI,EAGb,OADQL,EAAAE,GAAiBD,EAAWG,GAC7B,UACqB,IAAtBD,GACMH,EAAAG,GAAmBF,EAAWG,EAAO,CAEjD,ICfSE,EAAkBC,GACtBvF,GAAG0E,IACNa,EAAAC,MAAMlE,IACNoD,EAAE7F,KAAKyC,EAAC,IACPmE,OAAOC,IACRhB,EAAEpE,MAAMoF,EAAC,GACV,ICPQC,EAAWC,IACtB,QAAmB,IAAfA,EACI,MAAA,IAAI9G,MAAM,2CAGX,MAAA,CACLqE,QAAuCkC,IAC9BO,KAAcP,GAEzB,ECDWQ,EAAY,CACvBC,EACAC,EAAmC,MAEnC,QAAsB,IAAlBD,EACI,MAAA,IAAIhH,MAAM,sDAGX,MAAA,CACLqE,QAAuCkC,IAC9B,IAAKS,KACPT,EACHU,GAGN"}