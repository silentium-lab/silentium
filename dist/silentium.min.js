!function(e){"use strict";const t=e=>null!=e;var r=Object.defineProperty,n=(e,t,n)=>((e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class s{constructor(){n(this,"owners"),n(this,"innerOwner"),this.owners=new Set,this.innerOwner=e=>{this.owners.forEach((t=>{t(e)}))}}owner(){return this.innerOwner}size(){return this.owners.size}has(e){return this.owners.has(e)}add(e){return this.owners.add(e),this}remove(e){return this.owners.delete(e),this}destroy(){return this.owners.forEach((e=>{this.remove(e)})),this}}const o=e=>{let t=!1;return(...r)=>{t||e(...r),t=!0}},i=e=>{e.forEach((e=>{"function"==typeof e&&e()}))},c=(...e)=>t=>{const r=new Set(Object.keys(e)),n=new Set,s={},o=[];return Object.entries(e).forEach((([e,i])=>{r.add(e),o.push(i((o=>{if(n.add(e),s[e]=o,n.size>0&&n.size===r.size)return t(Object.values(s))})))})),()=>{r.clear(),n.clear(),i(o)}},a=(...e)=>{let t,r;const n=new WeakMap,s=[],c=o=>{const i=e[o],a=e[o+1];i((e=>{a||(r=e,s.push(t?.(e))),a&&void 0!==r&&void 0!==t&&s.push(t?.(r)),a&&!n.has(i)&&c(o+1),n.set(i,1)}))},a=o((e=>{t=e,c(0)}));return e=>(a(e),t=e,()=>{i(s)})},u=e=>{let r;const n=()=>{if(void 0!==r&&t(e))return r(e)};return[e=>(r=e,n()),t=>(e=t,n())]},h=e=>t=>t(e);e.OwnerPool=s,e.all=c,e.any=(...e)=>t=>{const r=[];return e.forEach((e=>{r.push(e(t))})),()=>{i(r)}},e.applied=(e,t)=>r=>e((e=>r(t(e)))),e.chain=a,e.destroyArr=i,e.executorApplied=(e,t)=>r=>e(t(r)),e.filtered=(e,t,r)=>n=>e((e=>t(e)?n(e):void 0!==r?n(r):void 0)),e.fromCallback=(e,...t)=>r=>{e((e=>{r(e)}),...t)},e.fromEvent=(e,t,r,n)=>s=>{const o=(...e)=>{s(e)};return e[r](t,o),()=>{void 0!==n&&e[n](t,o)}},e.fromPromise=e=>{const[t,r]=u();return[t=>{e.then((e=>{t(e)})).catch((e=>{r(e)}))},t]},e.i=h,e.isFilled=t,e.lazyChain=(e,t)=>(...r)=>{const n=e(...r);return a(t,n)},e.lazyClass=e=>(...t)=>{const r=new e(...t);return e=>{r.value(e)}},e.map=(e,t)=>r=>{e((e=>{const n=[];e.forEach((e=>{let r=e;"function"!=typeof r&&(r=h(r));const s=t(r);n.push(s)}));c(...n)(r)}))},e.of=u,e.onExecuted=o,e.once=e=>t=>{let r=!1;e((e=>{r||(r=!0,t(e))}))},e.sequence=e=>t=>{const r=[];e((e=>{r.push(e),t(r)}))},e.shared=e=>{const r=new s;let n,i;const c=o((()=>{const t=r.owner();i=e((e=>{t(e),n=e}))}));return[e=>{let s;return c(),t(n)&&!r.has(e)&&(s=e(n)),r.add(e),()=>{r.remove(e),s?.()}},()=>{r.destroy(),i?.()},r]},e.sharedStateless=e=>{const t=new s;let r;const n=o((n=>{t.add(n),r=e(t.owner())}));return[e=>(n(e),t.has(e)||t.add(e),()=>{t.remove(e)}),()=>{t.destroy(),r?.()},t]},e.stream=e=>t=>{e((e=>{e.forEach((e=>{t(e)}))}))}}({});
