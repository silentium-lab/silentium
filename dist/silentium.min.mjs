const n=(...n)=>{const t=new Set(Object.keys(n)),e=new Set;return function(o){const r={};Object.entries(n).forEach((([n,u])=>{t.add(n),u((function(u){e.add(n),r[n]=u,((n,t)=>n.size>0&&n.size===t.size)(e,t)&&o(Object.values(r))}))}))}},t=(...n)=>function(t){n.forEach((n=>{n(t)}))},e=(n,t)=>function(e){n((function(n){e(t(n))}))},o=(...n)=>function(t){let e;const o=r=>{const u=n[r],c=n[r+1];u((function(n){c||(e=n),e&&t(e),c&&!e&&o(r+1)}))};o(0)},r=(n,t)=>function(e){const o=t(e);n(o)},u=(n,t,e)=>function(o){n((function(n){t(n)?o(n):void 0!==e&&o(e)}))},c=(t,e,o,r)=>{let u=null;const c=function(n){u&&u(n)};return function(i){u=i;return n(t,e,o)((function([n,t,e]){n?.[e]&&n[e](t,c)})),function(){if(u=null,!r)return;n(t,e,r)((([n,t,e])=>{n?.[e]?.(t,c)}))}}},i=(n,t)=>function(e){n.then((function(n){e(n)})).catch((function(n){t?.(n)}))},s=n=>null!=n;var f=Object.defineProperty,h=(n,t,e)=>((n,t,e)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);class l{constructor(){h(this,"owners"),h(this,"innerOwner"),this.owners=new Set,this.innerOwner=n=>{this.owners.forEach((t=>{t(n)}))}}owner(){return this.innerOwner}size(){return this.owners.size}has(n){return this.owners.has(n)}add(n){return this.owners.add(n),this}remove(n){return this.owners.delete(n),this}destroy(){return this.owners.forEach((n=>{this.remove(n)})),this}}const a=n=>{let t=null;const e=n=>{s(n)&&t&&t(n)};return{event:function(o){if(t)throw new Error("Late component gets new user, when another was already connected!");t=o,e(n)},use:function(n){e(n)}}},d=n=>function(t){let e=!1;n((function(n){e||(e=!0,t(n))}))},w=(n,t=!1)=>{const e=new l;let o;const r=a();return d(r.event)((function(){n((function(n){o=n,e.owner()(n)}))})),{event:function(n){return r.use(1),t||!s(o)||e.has(n)||n(o),e.add(n),()=>{e.remove(n)}},use:function(n){r.use(1),o=n,e.owner()(n)},touched(){r.use(1)},pool:()=>e,destroy(){e.destroy()}}},v=(n,t=!1)=>{const e=w(n.event,t);return{event:function(n){e.event(n)},use:function(t){e.touched(),n.use(t)}}},y=n=>v(a(n)),p=(n,t)=>function(...e){return t(n(...e))},E=(n,t,e=0)=>function(...o){return n(...function(n,t,e){const o=n.slice(0,e);for(;o.length<e;)o.push(void 0);return o.concat(t)}(o,t,e))};const m=n=>{const t=[];return{get:function(...e){const o=n(...e);return n=>{if("destroy"in o)t.push(o.destroy),o.event(n);else{const e=o(n);e&&t.push(e)}return()=>{t.forEach((n=>n()))}}},destroy:function(){t.forEach((n=>n()))}}},b=(n,t)=>{let e,o=null;const r=()=>{o=null,e?.()};return{event:function(u){return o=u,e=n((n=>{o&&o(n)})),e&&t&&t(r),r},destroy:r}},O=n=>function(t){let e=!1;const o=n((function(n){e||t(n)}));return()=>{e=!0,o?.()}},z=n=>function(t){return t(n)},g=(n,t)=>n(t),j=()=>function(){},S=()=>{const n=[];return{add(t){const e=b(t);return n.push(e.destroy),e.event},destroy(){n.forEach((n=>n()))}}},P=(t,e)=>function(o){t((function(t){const r=[];t.forEach((n=>{let t=n;"function"!=typeof t&&(t=z(t));const o=e(t);r.push(o)}));n(...r)(o)}))},x=(n,t=null)=>(n((function(n){t=n})),{[Symbol.toPrimitive]:()=>t,primitive:()=>t,primitiveWithException(){if(null===t)throw new Error("Primitive value is null");return t}}),k=n=>function(t){const e=[];n((function(n){e.push(n),t(e)}))},L=n=>function(t){n((function(n){n.forEach((n=>{t(n)}))}))};export{l as OwnerPool,j as _void,n as all,t as any,e as applied,o as chain,p as constructorApplied,E as constructorArgs,m as constructorDestroyable,S as destroyContainer,b as destructor,r as executorApplied,u as filtered,c as fromEvent,i as fromPromise,s as isFilled,a as late,y as lateShared,O as local,P as map,z as of,g as on,d as once,x as primitive,k as sequence,w as shared,v as sharedSource,L as stream};
//# sourceMappingURL=silentium.min.mjs.map
