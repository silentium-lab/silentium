const n=(...n)=>{const t=new Set(Object.keys(n)),e=new Set;return function(o){const r={};Object.entries(n).forEach((([n,u])=>{t.add(n),u((function(u){e.add(n),r[n]=u,((n,t)=>n.size>0&&n.size===t.size)(e,t)&&o(Object.values(r))}))}))}},t=(...n)=>function(t){n.forEach((n=>{n(t)}))},e=(n,t)=>function(e){n((function(n){e(t(n))}))},o=(...n)=>function(t){let e;const o=r=>{const u=n[r],i=n[r+1];u((function(n){i||(e=n),e&&t(e),i&&!e&&o(r+1)}))};o(0)},r=(n,t)=>function(e){const o=t(e);n(o)},u=(n,t,e)=>function(o){n((function(n){t(n)?o(n):void 0!==e&&o(e)}))},i=(t,e,o,r)=>{let u=null;const i=function(n){u&&u(n)};return function(c){u=c;return n(t,e,o)((function([n,t,e]){n?.[e]&&n[e](t,i)})),function(){if(u=null,!r)return;n(t,e,r)((([n,t,e])=>{n?.[e]?.(t,i)}))}}},c=(n,t)=>function(e){n.then((function(n){e(n)})).catch((function(n){t?.(n)}))},s=n=>null!=n;var f=Object.defineProperty,l=(n,t,e)=>((n,t,e)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);class h{constructor(){l(this,"owners"),l(this,"innerOwner"),this.owners=new Set,this.innerOwner=n=>{this.owners.forEach((t=>{t(n)}))}}owner(){return this.innerOwner}size(){return this.owners.size}has(n){return this.owners.has(n)}add(n){return this.owners.add(n),this}remove(n){return this.owners.delete(n),this}destroy(){return this.owners.forEach((n=>{this.remove(n)})),this}}const a=n=>{let t=null;const e=n=>{s(n)&&t&&t(n)};return{event:function(o){if(t)throw new Error("Late component gets new user, when another was already connected!");t=o,e(n)},use:function(n){e(n)}}},w=n=>function(t){let e=!1;n((function(n){e||(e=!0,t(n))}))},d=(n,t=!1)=>{const e=new h;let o;const r=a();return w(r.event)((function(){n((function(n){o=n,e.owner()(n)}))})),{event:function(n){return r.use(1),t||!s(o)||e.has(n)||n(o),e.add(n),()=>{e.remove(n)}},use:function(n){r.use(1),o=n,e.owner()(n)},touched(){r.use(1)},pool:()=>e,destroy(){e.destroy()}}},v=(n,t=!1)=>{const e=d(n.event,t);return{event:function(n){e.event(n)},use:function(t){e.touched(),n.use(t)}}},p=n=>v(a(n)),y=(n,t)=>function(...e){return t(n(...e))},m=(n,t,e=0)=>function(...o){return n(...function(n,t,e){const o=n.slice(0,e);for(;o.length<e;)o.push(void 0);return o.concat(t)}(o,t,e))};const E=n=>{const t=[];return{get:function(...e){const o=n(...e);return t.push(o),o},destroy:function(){t.forEach((n=>n.destroy()))}}},b=(n,t)=>{let e,o=null;const r=()=>{o=null,e?.()};return{event:function(u){return o=u,e=n((n=>{o&&o(n)})),e&&t&&t(r),r},destroy:r}},O=n=>function(t){let e=!1;const o=n((function(n){e||t(n)}));return()=>{e=!0,o?.()}},z=n=>function(t){return t(n)},g=(n,t)=>n(t),j=()=>function(){},S=(t,e)=>function(o){t((function(t){const r=[];t.forEach((n=>{let t=n;"function"!=typeof t&&(t=z(t));const o=e(t);r.push(o)}));n(...r)(o)}))},P=(n,t=null)=>(n((function(n){t=n})),{[Symbol.toPrimitive]:()=>t,primitive:()=>t,primitiveWithException(){if(null===t)throw new Error("Primitive value is null");return t}}),x=n=>function(t){const e=[];n((function(n){e.push(n),t(e)}))},k=n=>function(t){n((function(n){n.forEach((n=>{t(n)}))}))};export{h as OwnerPool,j as _void,n as all,t as any,e as applied,o as chain,y as constructorApplied,m as constructorArgs,E as constructorDestroyable,b as destructor,r as executorApplied,u as filtered,i as fromEvent,c as fromPromise,s as isFilled,a as late,p as lateShared,O as local,S as map,z as of,g as on,w as once,P as primitive,x as sequence,d as shared,v as sharedSource,k as stream};
//# sourceMappingURL=silentium.min.mjs.map
