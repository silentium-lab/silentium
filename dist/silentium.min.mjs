function t(t){return(...e)=>{let r;return{event(s){return r=t.call(s,...e),this},destroy(){return void 0!==r&&r(),this}}}}function e(t){return(...e)=>new t(...e)}const r=t=>null!=t;function s(t){return null!==t&&"object"==typeof t&&"event"in t&&"function"==typeof t.event}function n(t){return null!==t&&"object"==typeof t&&"destroy"in t&&"function"==typeof t.destroy}function i(t){return null!==t&&"object"==typeof t&&"destroyed"in t&&"function"==typeof t.destroy}function o(t){return null!==t&&"object"==typeof t&&"use"in t&&"function"==typeof t.use}function u(t){return new a(t)}class a{constructor(t){this.base=t}destroy(){return n(this.base)&&this.base.destroy(),this}}var h=Object.defineProperty,c=(t,e,r)=>((t,e,r)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function l(){return new p}class p{constructor(){c(this,"destructors",[])}add(t){return n(t)&&this.destructors.push(t),t}destroy(){return this.destructors.forEach((t=>t.destroy())),this.destructors.length=0,this}}function b(t,e){if("function"!=typeof t)throw new Error(`${e}: is not function`)}function f(t,e){if(!s(t))throw new Error(`${e}: is not event`)}function v(t,e){if(!o(t))throw new Error(`${e}: is not transport`)}var d=Object.defineProperty,w=(t,e,r)=>((t,e,r)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function y(t){return new $(t)}class ${constructor(t){this.eventExecutor=t,w(this,"mbDestructor"),b(t,"Event: eventExecutor")}event(t){return this.mbDestructor=this.eventExecutor(t),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}function m(t){return new g(t)}class g{constructor(t){this.transportExecutor=t,b(t,"Transport: transport executor")}use(t){return this.transportExecutor(t),this}}function P(t){return new E(t)}class E{constructor(t){this.executor=t,b(t,"TransportEvent: transport executor")}use(t){return this.executor(t)}}function T(t,...e){return new j(t,e)}class j{constructor(t,e=[],r){this.executor=t,this.args=e,this._child=r,b(t,"TransportParent: executor")}use(t){if(void 0===this._child)throw new Error("no base transport");return this.executor.call(this._child,t,...this.args),this}child(t,...e){return new j(this.executor,[...this.args,...e],t)}}var O=Object.defineProperty,x=(t,e,r)=>((t,e,r)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function V(t){return new M(t)}class M{constructor(t){this.$base=t,x(this,"destroyed",!1),x(this,"transport",T((function(t,e){e.destroyed||this.use(t)}),this)),f(t,"Local: $base")}event(t){return this.$base.event(this.transport.child(t)),this}destroy(){return this.destroyed=!0,this}}function C(t){return y((e=>{e.use(t())}))}function z(t){return new A(t)}class A{constructor(t){this.value=t}event(t){return t.use(this.value),this}}function k(t){return new F(t)}class F{constructor(t){this.base=t}wait(t){return void 0!==this.base&&t.event(this.base),this}}function S(){return new B}class B{use(){return this}}var D=Object.defineProperty,I=(t,e,r)=>((t,e,r)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function N(...t){return new _(...t)}class _{constructor(...t){I(this,"known"),I(this,"filled",new Set),I(this,"$events"),I(this,"result",[]),I(this,"transport",T((function(t,e,r){var s,n;e.filled.add(r),e.result[parseInt(r)]=t,s=e.filled,n=e.known,s.size>0&&s.size===n.size&&this.use(e.result)}),this)),this.known=new Set(Object.keys(t)),this.$events=t}event(t){return Object.entries(this.$events).forEach((([e,r])=>{f(r,"All: item"),r.event(this.transport.child(t,e))})),0===this.known.size&&t.use([]),this}}var L=Object.defineProperty,R=(t,e,r)=>((t,e,r)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function W(...t){return new q(...t)}class q{constructor(...t){R(this,"$events"),this.$events=t}event(t){return this.$events.forEach((e=>{f(e,"Any: item"),e.event(t)})),this}}var G=Object.defineProperty,H=(t,e,r)=>((t,e,r)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function J(t,e){return new K(t,e)}class K{constructor(t,e){this.$base=t,this.applier=e,H(this,"transport",T((function(t,e){this.use(e.applier(t))}),this)),f(t,"Applied: base")}event(t){return this.$base.event(this.transport.child(t)),this}}function Q(t,e){return J(t,(t=>e(...t)))}function U(t,e,r){return new X(t,e,r)}class X{constructor(t,e,r){this.$base=t,this.errorMessage=e,this.errorOriginal=r,f(t,"Catch: base"),v(e,"Catch: errorMessage"),void 0!==r&&v(r,"Catch: errorOriginal")}event(t){try{this.$base.event(t)}catch(t){t instanceof Error?this.errorMessage.use(t.message):this.errorMessage.use(String(t)),this.errorOriginal&&this.errorOriginal.use(t)}return this}}var Y=Object.defineProperty,Z=(t,e,r)=>((t,e,r)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function tt(...t){return new et(...t)}class et{constructor(...t){Z(this,"$events"),Z(this,"$latest"),Z(this,"handleEvent",((t,e)=>{const r=this.$events[t],s=this.$events[t+1];r.event(this.oneEventTransport.child(e,s,t))})),Z(this,"oneEventTransport",T((function(t,e,r,s){r||(e.$latest=t),e.$latest&&this.use(e.$latest),r&&!e.$latest&&e.handleEvent(s+1,this)}),this)),this.$events=t}event(t){return this.handleEvent(0,t),this}}function rt(t,e){return new st(t,e)}class st{constructor(t,e){this.$base=t,this.applier=e,f(t,"ExecutorApplied: base")}event(t){const e=this.applier(t.use.bind(t));return this.$base.event(m(e)),this}}var nt=Object.defineProperty,it=(t,e,r)=>((t,e,r)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function ot(t,e,r){return new ut(t,e,r)}class ut{constructor(t,e,r){this.$base=t,this.predicate=e,this.defaultValue=r,it(this,"parent",T((function(t,e){e.predicate(t)?this.use(t):void 0!==e.defaultValue&&this.use(e.defaultValue)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var at=Object.defineProperty,ht=(t,e,r)=>((t,e,r)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function ct(t,e,r,s){return new lt(t,e,r,s)}class lt{constructor(t,e,r,s){this.$emitter=t,this.$eventName=e,this.$subscribeMethod=r,this.$unsubscribeMethod=s,ht(this,"lastTransport",null),ht(this,"handler",(t=>{this.lastTransport&&this.lastTransport.use(t)})),ht(this,"parent",T((function([t,e,r],s){s.lastTransport=this,t?.[r]&&t[r](e,s.handler)}),this))}event(t){return N(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(t)),this}destroy(){return this.lastTransport=null,this.$unsubscribeMethod?(N(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(m((([t,e,r])=>{t?.[r]?.(e,this.handler)}))),this):this}}function pt(t,e){return new bt(t,e)}class bt{constructor(t,e){this.p=t,this.error=e}event(t){return this.p.then((e=>{t.use(e)})).catch((t=>{this.error?.use(t)})),this}}var ft=Object.defineProperty,vt=(t,e,r)=>((t,e,r)=>e in t?ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function dt(t){return new wt(t)}class wt{constructor(t){this.v=t,vt(this,"lateTransport",null),vt(this,"notify",(t=>{r(t)&&this.lateTransport&&this.lateTransport.use(t)}))}event(t){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=t,this.notify(this.v),this}use(t){return this.notify(t),this}}var yt=Object.defineProperty,$t=(t,e,r)=>((t,e,r)=>e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function mt(t){return new gt(t)}class gt{constructor(t){this.$base=t,$t(this,"isFilled",!1),$t(this,"parent",T((function(t,e){e.isFilled||(e.isFilled=!0,this.use(t))}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var Pt=Object.defineProperty,Et=(t,e,r)=>((t,e,r)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);class Tt{constructor(){Et(this,"transports"),Et(this,"innerTransport"),this.transports=new Set,this.innerTransport=m((t=>{this.transports.forEach((e=>{i(e)&&e.destroyed()?this.transports.delete(e):e.use(t)}))}))}transport(){return this.innerTransport}size(){return this.transports.size}has(t){return this.transports.has(t)}add(t){return this.transports.add(t),this}remove(t){return this.transports.delete(t),this}destroy(){return this.transports.forEach((t=>{this.remove(t)})),this}}var jt=Object.defineProperty,Ot=(t,e,r)=>((t,e,r)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function xt(t,e=!1){return new Vt(t,e)}class Vt{constructor(t,e=!1){this.$base=t,this.stateless=e,Ot(this,"transportPool",new Tt),Ot(this,"lastValue"),Ot(this,"calls",dt()),Ot(this,"firstCallTransport",m((t=>{this.lastValue=t,this.transportPool.transport().use(t)}))),mt(this.calls).event(m((()=>{this.$base.event(this.firstCallTransport)})))}event(t){return this.calls.use(1),this.stateless||!r(this.lastValue)||this.transportPool.has(t)||t.use(this.lastValue),this.transportPool.add(t),this}use(t){return this.calls.use(1),this.lastValue=t,this.transportPool.transport().use(t),this}touched(){this.calls.use(1)}pool(){return this.transportPool}destroy(){return this.transportPool.destroy()}}var Mt=Object.defineProperty,Ct=(t,e,r)=>((t,e,r)=>e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function zt(t,e=!1){return new At(t,e)}class At{constructor(t,e=!1){this.$base=t,Ct(this,"$sharedBase"),this.$sharedBase=xt(this.$base,e)}event(t){return this.$sharedBase.event(t),this}use(t){return this.$sharedBase.touched(),this.$base.use(t),this}}var kt=Object.defineProperty,Ft=(t,e,r)=>((t,e,r)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function St(t,e=null){return new Bt(t,e)}class Bt{constructor(t,e=null){this.$base=t,this.theValue=e,Ft(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(m((t=>{this.theValue=t}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var Dt=Object.defineProperty,It=(t,e,r)=>((t,e,r)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function Nt(t){return new _t(t)}class _t{constructor(t){It(this,"$event"),It(this,"primitive"),this.$event=zt(dt(t)),this.primitive=St(this,t)}event(t){return this.$event.event(t),this}use(t){return this.$event.use(t),this}value(){return this.primitive}}var Lt=Object.defineProperty,Rt=(t,e,r)=>((t,e,r)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Wt(t,e){return new qt(t,e)}class qt{constructor(t,e){this.$base=t,this.$target=e,Rt(this,"parent",T((function(t,e){const r=[];t.forEach((t=>{let n=t;s(n)||(n=z(n));const i=e.$target.use(n);r.push(i)})),N(...r).event(this)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var Gt=Object.defineProperty,Ht=(t,e,r)=>((t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function Jt(t){return new Kt(t)}Jt.transport={};class Kt{constructor(t){this.$rpc=t,Ht(this,"$result",Nt()),Ht(this,"$error",Nt())}result(){return this.$rpc.event(m((t=>{const e=void 0===t.transport?Jt.transport.default:Jt.transport[t.transport]||Jt.transport.default;if(!e)throw new Error(`RPCImpl: Transport not found ${t.transport}`);t.result||(t.result=this.$result),t.error||(t.error=this.$error),e.use(t)}))),this.$result}error(){return this.$error}}function Qt(t){return m((e=>{if(!e.result)throw new Error("RPCChain did not find result in rpc message");t.event(e.result)}))}function Ut(t){const e=Nt();return Jt.transport[t]=e,y((t=>{e.event(t)}))}var Xt=Object.defineProperty,Yt=(t,e,r)=>((t,e,r)=>e in t?Xt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function Zt(t){return new te(t)}class te{constructor(t){this.$base=t,Yt(this,"result",[]),Yt(this,"parent",T((function(t,e){e.result.push(t),this.use(e.result)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var ee=Object.defineProperty,re=(t,e,r)=>((t,e,r)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function se(t){return new ne(t)}class ne{constructor(t){this.$base=t,re(this,"parent",T((function(t){t.forEach((t=>{this.use(t)}))})))}event(t){return this.$base.event(this.parent.child(t)),this}}function ie(t,e){return new oe(t,e)}class oe{constructor(t,e){this.baseTransport=t,this.applier=e}use(t){return this.applier(this.baseTransport.use(t))}}function ue(t,e,r=0){return new ae(t,e,r)}class ae{constructor(t,e,r=0){this.baseTransport=t,this.args=e,this.startFromArgIndex=r}use(t){return this.baseTransport.use(function(t,e,r){const s=t.slice(0,r);for(;s.length<r;)s.push(void 0);return s.concat(e)}(t,this.args,this.startFromArgIndex))}}var he=Object.defineProperty,ce=(t,e,r)=>((t,e,r)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function le(t){return new pe(t)}class pe{constructor(t){this.baseTransport=t,ce(this,"destructors",[])}use(t){const e=this.baseTransport.use(t);return n(e)&&this.destructors.push(e),e}destroy(){return this.destructors.forEach((t=>t.destroy())),this}}export{N as All,_ as AllEvent,W as Any,q as AnyEvent,J as Applied,Q as AppliedDestructured,K as AppliedEvent,U as Catch,X as CatchEvent,tt as Chain,et as ChainEvent,t as Component,e as ComponentClass,l as DestroyContainer,p as DestroyContainerImpl,u as Destroyable,a as DestroyableImpl,y as Event,$ as EventImpl,rt as ExecutorApplied,st as ExecutorAppliedEvent,ot as Filtered,ut as FilteredEvent,ct as FromEvent,lt as FromEventAdapter,pt as FromPromise,bt as FromPromiseEvent,dt as Late,wt as LateEvent,Nt as LateShared,_t as LateSharedEvent,V as Local,M as LocalEvent,Wt as Map,qt as MapEvent,C as New,z as Of,A as OfEvent,mt as Once,gt as OnceEvent,St as Primitive,Bt as PrimitiveImpl,Jt as RPC,Qt as RPCChain,Kt as RPCImpl,Ut as RPCOf,Zt as Sequence,te as SequenceEvent,xt as Shared,Vt as SharedEvent,zt as SharedSource,At as SharedSourceEvent,se as Stream,ne as StreamEvent,m as Transport,ie as TransportApplied,oe as TransportAppliedImpl,ue as TransportArgs,ae as TransportArgsImpl,le as TransportDestroyable,pe as TransportDestroyableEvent,P as TransportEvent,E as TransportEventImpl,g as TransportImpl,k as TransportOptional,F as TransportOptionalImpl,T as TransportParent,j as TransportParentImpl,Tt as TransportPool,S as Void,B as VoidImpl,f as ensureEvent,b as ensureFunction,v as ensureTransport,n as isDestroyable,i as isDestroyed,s as isEvent,r as isFilled,o as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
