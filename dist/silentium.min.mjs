const t=t=>null!=t;function e(t){return null!==t&&"object"==typeof t&&"event"in t&&"function"==typeof t.event}function r(t){return null!==t&&"object"==typeof t&&"destroy"in t&&"function"==typeof t.destroy}function s(t){return null!==t&&"object"==typeof t&&"use"in t&&"function"==typeof t.use}function n(t,e){if("function"!=typeof t)throw new Error(`${e}: is not function`)}function i(t,r){if(!e(t))throw new Error(`${r}: is not event`)}function o(t,e){if(!s(t))throw new Error(`${e}: is not transport`)}function u(t){return(...e)=>{let r;return{event(s){return r=t.call(s,...e),this},destroy(){return void 0!==r&&r(),this}}}}function a(t){return(...e)=>new t(...e)}var h=Object.defineProperty,c=(t,e,r)=>((t,e,r)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function l(){return new b}class b{constructor(){c(this,"destructors",[])}add(t){return this.destructors.push(t),this}destroy(){return this.destructors.forEach((t=>t.destroy())),this}}var f=Object.defineProperty,v=(t,e,r)=>((t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function d(t){return new p(t)}class p{constructor(t){this.eventExecutor=t,v(this,"mbDestructor"),n(t,"Event: eventExecutor")}event(t){return this.mbDestructor=this.eventExecutor(t),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}var w=Object.defineProperty,y=(t,e,r)=>((t,e,r)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function $(t){return new m(t)}class m{constructor(t){this.$base=t,y(this,"destroyed",!1),y(this,"transport",z((function(t,e){e.destroyed||this.use(t)}),this)),i(t,"Local: $base")}event(t){return this.$base.event(this.transport.child(t)),this}destroy(){return this}}function g(t){return new O(t)}class O{constructor(t){this.value=t}event(t){return t.use(this.value),this}}function P(){return new E}class E{use(){return this}}var T=Object.defineProperty,j=(t,e,r)=>((t,e,r)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);class x{constructor(){j(this,"owners"),j(this,"innerOwner"),this.owners=new Set,this.innerOwner=V((t=>{this.owners.forEach((e=>{e.use(t)}))}))}owner(){return this.innerOwner}size(){return this.owners.size}has(t){return this.owners.has(t)}add(t){return this.owners.add(t),this}remove(t){return this.owners.delete(t),this}destroy(){return this.owners.forEach((t=>{this.remove(t)})),this}}function V(t){return new M(t)}class M{constructor(t){this.transportExecutor=t,n(t,"Transport: transport executor")}use(t){return this.transportExecutor(t),this}}function A(t){return new k(t)}class k{constructor(t){this.executor=t,n(t,"TheTransportEvent: transport executor")}use(t){return this.executor(t)}}function z(t,...e){return new C(t,e)}class C{constructor(t,e=[],r){this.executor=t,this.args=e,this._child=r,n(t,"ParentTransport: executor")}use(t){if(void 0===this._child)throw new Error("no base transport");return this.executor.call(this._child,t,...this.args),this}child(t,...e){return new C(this.executor,[...this.args,...e],t)}}var F=Object.defineProperty,B=(t,e,r)=>((t,e,r)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function D(...t){return new S(...t)}class S{constructor(...t){B(this,"known"),B(this,"filled",new Set),B(this,"$events"),B(this,"result",{}),B(this,"transport",z((function(t,e,r){var s,n;e.filled.add(r),e.result[r]=t,s=e.filled,n=e.known,s.size>0&&s.size===n.size&&this.use(Object.values(e.result))}),this)),this.known=new Set(Object.keys(t)),this.$events=t}event(t){return Object.entries(this.$events).forEach((([e,r])=>{i(r,"All: item"),this.known.add(e),r.event(this.transport.child(t,e))})),this}}var N=Object.defineProperty,_=(t,e,r)=>((t,e,r)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function I(...t){return new L(...t)}class L{constructor(...t){_(this,"$events"),this.$events=t}event(t){return this.$events.forEach((e=>{i(e,"Any: item"),e.event(t)})),this}}var W=Object.defineProperty,q=(t,e,r)=>((t,e,r)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function G(t,e){return new H(t,e)}class H{constructor(t,e){this.$base=t,this.applier=e,q(this,"transport",z((function(t,e){this.use(e.applier(t))}),this)),i(t,"Applied: base")}event(t){return this.$base.event(this.transport.child(t)),this}}function J(t,e,r){return new K(t,e,r)}class K{constructor(t,e,r){this.$base=t,this.errorMessage=e,this.errorOriginal=r,i(t,"Catch: base"),o(e,"Catch: errorMessage"),void 0!==r&&o(r,"Catch: errorOriginal")}event(t){try{this.$base.event(t)}catch(t){t instanceof Error?this.errorMessage.use(t.message):this.errorMessage.use(t),this.errorOriginal&&this.errorOriginal.use(t)}return this}}var Q=Object.defineProperty,R=(t,e,r)=>((t,e,r)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function U(...t){return new X(...t)}class X{constructor(...t){R(this,"$events"),R(this,"$latest"),R(this,"handleEvent",((t,e)=>{const r=this.$events[t],s=this.$events[t+1];r.event(this.oneEventTransport.child(e,s,t))})),R(this,"oneEventTransport",z((function(t,e,r,s){r||(e.$latest=t),e.$latest&&this.use(e.$latest),r&&!e.$latest&&e.handleEvent(s+1,this)}),this)),this.$events=t}event(t){return this.handleEvent(0,t),this}}function Y(t,e){return new Z(t,e)}class Z{constructor(t,e){this.$base=t,this.applier=e,i(t,"ExecutorApplied: base")}event(t){const e=this.applier(t.use.bind(t));return this.$base.event(V(e)),this}}var tt=Object.defineProperty,et=(t,e,r)=>((t,e,r)=>e in t?tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function rt(t,e,r){return new st(t,e,r)}class st{constructor(t,e,r){this.$base=t,this.predicate=e,this.defaultValue=r,et(this,"parent",z((function(t,e){e.predicate(t)?this.use(t):void 0!==e.defaultValue&&this.use(e.defaultValue)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var nt=Object.defineProperty,it=(t,e,r)=>((t,e,r)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function ot(t,e,r,s){return new ut(t,e,r,s)}class ut{constructor(t,e,r,s){this.$emitter=t,this.$eventName=e,this.$subscribeMethod=r,this.$unsubscribeMethod=s,it(this,"lastTransport",null),it(this,"handler",(t=>{this.lastTransport&&this.lastTransport.use(t)})),it(this,"parent",z((function([t,e,r],s){s.lastTransport=this,t?.[r]&&t[r](e,s.handler)}),this))}event(t){return D(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(t)),this}destroy(){if(this.lastTransport=null,!this.$unsubscribeMethod)return this;return D(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(V((([t,e,r])=>{t?.[r]?.(e,this.handler)}))),this}}function at(t,e){return new ht(t,e)}class ht{constructor(t,e){this.p=t,this.errorOwner=e}event(t){return this.p.then((function(e){t.use(e)})).catch((t=>{this.errorOwner?.use(t)})),this}}var ct=Object.defineProperty,lt=(t,e,r)=>((t,e,r)=>e in t?ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function bt(t){return new ft(t)}class ft{constructor(e){this.v=e,lt(this,"lateTransport",null),lt(this,"notify",(e=>{t(e)&&this.lateTransport&&this.lateTransport.use(e)}))}event(t){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=t,this.notify(this.v),this}use(t){return this.notify(t),this}}var vt=Object.defineProperty,dt=(t,e,r)=>((t,e,r)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function pt(t){return new wt(t)}class wt{constructor(t){this.$base=t,dt(this,"isFilled",!1),dt(this,"parent",z((function(t,e){e.isFilled||(e.isFilled=!0,this.use(t))}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var yt=Object.defineProperty,$t=(t,e,r)=>((t,e,r)=>e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function mt(t,e=!1){return new gt(t,e)}class gt{constructor(t,e=!1){this.$base=t,this.stateless=e,$t(this,"ownersPool",new x),$t(this,"lastValue"),$t(this,"calls",bt()),$t(this,"firstCallTransport",V((t=>{this.lastValue=t,this.ownersPool.owner().use(t)}))),pt(this.calls).event(V((()=>{this.$base.event(this.firstCallTransport)})))}event(e){return this.calls.use(1),this.stateless||!t(this.lastValue)||this.ownersPool.has(e)||e.use(this.lastValue),this.ownersPool.add(e),this}use(t){return this.calls.use(1),this.lastValue=t,this.ownersPool.owner().use(t),this}touched(){this.calls.use(1)}pool(){return this.ownersPool}destroy(){return this.ownersPool.destroy()}}var Ot=Object.defineProperty,Pt=(t,e,r)=>((t,e,r)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Et(t,e=!1){return new Tt(t,e)}class Tt{constructor(t,e=!1){this.$base=t,Pt(this,"$sharedBase"),this.$sharedBase=mt(this.$base,e)}event(t){return this.$sharedBase.event(t),this}use(t){return this.$sharedBase.touched(),this.$base.use(t),this}}var jt=Object.defineProperty,xt=(t,e,r)=>((t,e,r)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Vt(t){return new Mt(t)}class Mt{constructor(t){xt(this,"$event"),this.$event=Et(bt(t))}event(t){return this.$event.event(t),this}use(t){return this.$event.use(t),this}}var At=Object.defineProperty,kt=(t,e,r)=>((t,e,r)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function zt(t,e){return new Ct(t,e)}class Ct{constructor(t,r){this.$base=t,this.$target=r,kt(this,"parent",z((function(t,r){const s=[];t.forEach((t=>{let n=t;e(n)||(n=g(n));const i=r.$target.use(n);s.push(i)})),D(...s).event(this)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var Ft=Object.defineProperty,Bt=(t,e,r)=>((t,e,r)=>e in t?Ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Dt(t,e=null){return new St(t,e)}class St{constructor(t,e=null){this.$base=t,this.theValue=e,Bt(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(V((t=>{this.theValue=t}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var Nt=Object.defineProperty,_t=(t,e,r)=>((t,e,r)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function It(t){return new Lt(t)}class Lt{constructor(t){this.$base=t,_t(this,"result",[]),_t(this,"parent",z((function(t,e){e.result.push(t),this.use(e.result)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var Wt=Object.defineProperty,qt=(t,e,r)=>((t,e,r)=>e in t?Wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Gt(t){return new Ht(t)}class Ht{constructor(t){this.$base=t,qt(this,"parent",z((function(t){t.forEach((t=>{this.use(t)}))})))}event(t){return this.$base.event(this.parent.child(t)),this}}function Jt(t,e){return new Kt(t,e)}class Kt{constructor(t,e){this.baseTransport=t,this.applier=e}use(t){return this.applier(this.baseTransport.use(t))}}function Qt(t,e,r=0){return new Rt(t,e,r)}class Rt{constructor(t,e,r=0){this.baseTransport=t,this.args=e,this.startFromArgIndex=r}use(t){return this.baseTransport.use(function(t,e,r){const s=t.slice(0,r);for(;s.length<r;)s.push(void 0);return s.concat(e)}(t,this.args,this.startFromArgIndex))}}var Ut=Object.defineProperty,Xt=(t,e,r)=>((t,e,r)=>e in t?Ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Yt(t){return new Zt(t)}class Zt{constructor(t){this.baseTransport=t,Xt(this,"destructors",[])}use(t){const e=this.baseTransport.use(t);return r(e)&&this.destructors.push(e),e}destroy(){return this.destructors.forEach((t=>t.destroy())),this}}export{D as All,I as Any,G as Applied,J as Catch,U as Chain,u as Component,a as ComponentClass,l as DestroyContainer,d as Event,Y as ExecutorApplied,rt as Filtered,ot as FromEvent,at as FromPromise,bt as Late,Vt as LateShared,$ as Local,zt as Map,g as Of,pt as Once,x as OwnerPool,Dt as Primitive,It as Sequence,mt as Shared,Et as SharedSource,Gt as Stream,X as TheChain,ht as TheFromPromise,Kt as TheTransportApplied,Rt as TheTransportArgs,V as Transport,Jt as TransportApplied,Qt as TransportArgs,Yt as TransportDestroyable,A as TransportEvent,z as TransportParent,P as Void,i as ensureEvent,n as ensureFunction,o as ensureTransport,r as isDestroyable,e as isEvent,t as isFilled,s as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
