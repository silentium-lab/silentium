function e(e,t){if(null==e)throw new Error("value didnt receive source argument");if(void 0===t||null===e)throw new Error("value didnt receive guest argument");return"function"==typeof e?e(t):"object"==typeof e&&"value"in e&&"function"==typeof e.value?e.value(t):i(e,t),e}function t(e){return"object"==typeof e&&"function"==typeof e.value||null!=e}const r=t=>{if(void 0===t)throw new Error("Source constructor didn't receive executor function");return r=>{e(t,r)}};function i(e,t){if(void 0===e)throw new Error("give didn't receive data argument");return void 0===t?r(e):("function"==typeof t?t(e):t.give(e),t)}function s(e){if(void 0===e)throw new Error("isGuest didnt receive mbGuest argument");return"function"==typeof e||"function"==typeof e?.give}class o{constructor(e){if(this.receiver=e,!e)throw new Error("reseiver function was not passed to Guest constructor")}give(e){return this.receiver(e),this}}class n{constructor(e,t){if(this.sourceGuest=e,this.targetGuest=t,void 0===e)throw new Error("GuestCast didnt receive sourceGuest argument");if(void 0===t)throw new Error("GuestCast didnt receive targetGuest argument")}introduction(){return"function"==typeof this.sourceGuest?"guest":this.sourceGuest.introduction?this.sourceGuest.introduction():"guest"}give(e){return i(e,this.targetGuest),this}disposed(e){const t=this.sourceGuest;return!!t.disposed&&t.disposed(e)}}var u=Object.defineProperty,c=(e,t,r)=>((e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const a=new Map,h=e=>{const t=[];return a.forEach(((r,i)=>{r.has(e)&&t.push(i)})),t},l=e=>{if(void 0===e)throw new Error("removePatronFromPools didnt receive patron argument");a.forEach((t=>{t.delete(e)}))},d=e=>{if(void 0===e)throw new Error("isPatronInPools didnt receive patron argument");let t=!1;return a.forEach((r=>{t||(t=r.has(e))})),t};class v{constructor(e){this.initiator=e,c(this,"patrons"),c(this,"give"),this.patrons=new Set,a.set(this,this.patrons);const t=e=>{this.patrons.forEach((t=>{this.sendValueToGuest(e,t)}))};this.give=e=>(t(e),this)}size(){return this.patrons.size}add(e){if(!e)throw new Error("PatronPool add method received nothing!");return"function"!=typeof e&&e.introduction&&"patron"===e.introduction()&&this.patrons.add(e),this}remove(e){return this.patrons.delete(e),this}distribute(e,t){return this.add(t),this.sendValueToGuest(e,t),this}sendValueToGuest(e,t){this.guestDisposed(e,t)||i(e,t)}guestDisposed(e,t){return!!t.disposed?.(e)&&(this.remove(t),!0)}}var g=Object.defineProperty,p=(e,t,r)=>((e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class w{constructor(e){p(this,"guests",new Set),p(this,"patronPool"),this.patronPool=new v(e)}give(e){return this.deliverToGuests(e),this.patronPool.give(e),this}add(e){return"function"!=typeof e&&e.introduction&&"guest"!==e.introduction()||this.guests.add(e),this.patronPool.add(e),this}remove(e){return this.guests.delete(e),this.patronPool.remove(e),this}distribute(e,t){return this.add(t),this.give(e),this}size(){return this.patronPool.size()+this.guests.size}deliverToGuests(e){this.guests.forEach((t=>{i(e,t)})),this.guests.clear()}}class f{constructor(e){this.theValue=e}give(e){return this.theValue=e,this}value(){if(void 0===this.theValue)throw new Error("no value in GuestSync!");return this.theValue}}class b{constructor(e){if(this.baseGuest=e,void 0===e)throw new Error("GuestObject didnt receive baseGuest argument")}give(e){let t=this.baseGuest;return"function"==typeof t&&(t=new o(t)),t.give(e),this}introduction(){return"function"!=typeof this.baseGuest&&this.baseGuest.introduction?this.baseGuest.introduction():"guest"}disposed(e){const t=this.baseGuest;return!!t.disposed&&t.disposed(e)}}class y{constructor(e,t){if(this.guest=e,this.disposeCheck=t,void 0===e)throw new Error("GuestDisposable didnt receive guest argument");if(void 0===t)throw new Error("GuestDisposable didnt receive disposeCheck argument")}disposed(e){return this.disposeCheck(e)}give(e){return i(e,this.guest),this}}class m{constructor(e,t){this.baseGuest=e,this.applier=t}give(e){return i(this.applier(e),this.baseGuest),this}}var P=Object.defineProperty,E=(e,t,r)=>((e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class G{constructor(e,t){E(this,"give"),this.give=t((t=>i(t,e)))}}class S{constructor(e){if(this.willBePatron=e,void 0===e)throw new Error("Patron didnt receive willBePatron argument")}introduction(){return"patron"}give(e){return i(e,this.willBePatron),this}disposed(e){const t=this.willBePatron;return t?.disposed?.(e)||!1}}const A=e=>"object"==typeof e&&null!==e&&"patron"===e?.introduction?.();var j=Object.defineProperty,D=(e,t,r)=>((e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class F{constructor(e){if(this.baseGuest=e,D(this,"received",!1),void 0===e)throw new Error("PatronOnce didnt receive baseGuest argument")}introduction(){return"patron"}give(e){return this.received||(this.received=!0,i(e,this.baseGuest)),this}disposed(e){if(this.received)return!0;const t=this.baseGuest;return!!t.disposed&&t.disposed(e)}}var O=Object.defineProperty,k=(e,t,r)=>((e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class z{constructor(e,t){k(this,"guestApplied"),this.guestApplied=new m(e,t)}give(e){return this.guestApplied.give(e),this}introduction(){return"patron"}}var K=Object.defineProperty,V=(e,t,r)=>((e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class C{constructor(e,t){V(this,"guestApplied"),this.guestApplied=new G(e,t)}give(e){return this.guestApplied.give(e),this}introduction(){return"patron"}}var T=Object.defineProperty,B=(e,t,r)=>((e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class M{constructor(r){B(this,"thePool",new v(this)),B(this,"theEmptyPool",new v(this)),B(this,"isEmpty"),B(this,"sourceDocument"),this.isEmpty=void 0===r,void 0!==r&&t(r)?e(r,new F((e=>{this.isEmpty=void 0===e,this.sourceDocument=e}))):(this.isEmpty=void 0===r,this.sourceDocument=r)}pool(){return this.thePool}give(e){return this.isEmpty=!1,this.sourceDocument=e,this.thePool.give(this.sourceDocument),this.theEmptyPool.give(this.sourceDocument),this}value(e){return this.isEmpty?(A(e)&&this.theEmptyPool.add(e),this):("function"==typeof e?this.thePool.distribute(this.sourceDocument,new o(e)):this.thePool.distribute(this.sourceDocument,e),this)}filled(){return!this.isEmpty}}var q=Object.defineProperty,x=(e,t,r)=>((e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class N{constructor(e=[]){x(this,"theAll"),x(this,"keysKnown"),x(this,"keysFilled",new Set),x(this,"filledAllPool",new w(this)),this.theAll=new M({}),this.keysKnown=new Set(e)}valueArray(e){const t=new b(e);return this.filledAllPool.add(new n(t,(e=>{t.give(Object.values(e))}))),this.isAllFilled()&&this.theAll.value(new o((e=>{this.filledAllPool.give(Object.values(e))}))),this}value(e){const t=new b(e);return this.isAllFilled()?(this.filledAllPool.add(t),this.theAll.value(new o((e=>{this.filledAllPool.give(e)})))):this.filledAllPool.add(t),this}guestKey(e){return this.keysKnown.add(e),new o((t=>{this.theAll.value(new o((r=>{this.keysFilled.add(e);const i={...r,[e]:t};this.theAll.give(i),this.isAllFilled()&&this.filledAllPool.give(i)})))}))}isAllFilled(){return this.keysFilled.size>0&&this.keysFilled.size===this.keysKnown.size}}class I{constructor(e,t){if(this.baseSource=e,this.targetSource=t,void 0===e)throw new Error("SourceSequence didn't receive baseSource argument");if(void 0===t)throw new Error("SourceSequence didn't receive targetSource argument")}value(r){const s=new N,o=new M,u=this.targetSource.get(o);return e(this.baseSource,new n(r,(n=>{let c=0;const a=()=>{void 0!==n[c+1]?(c+=1,h()):s.valueArray(r)};function h(){o.give(null);const r=n[c];t(r)?e(r,new F((t=>{o.give(t),e(u,s.guestKey(c.toString())),a()}))):(o.give(r),e(u,s.guestKey(c.toString())),a())}void 0!==n[c]?h():i([],r)}))),this}}class R{constructor(e,t){if(this.baseSource=e,this.targetSource=t,void 0===e)throw new Error("SourceMap didnt receive baseSource argument");if(void 0===t)throw new Error("SourceMap didnt receive targetSource argument")}value(t){const r=new N;return e(this.baseSource,new n(t,(t=>{t.forEach(((t,i)=>{e(this.targetSource.get(t),r.guestKey(i.toString()))}))}))),r.valueArray(t),this}}class H{constructor(e){if(this.sources=e,void 0===e)throw new Error("SourceRace didnt receive sources argument")}value(t){let r=null;return this.sources.forEach((s=>{e(s,new n(t,(e=>{r&&r!==s||(i(e,t),r=s)})))})),this}}class J{constructor(e,t){if(this.baseGuest=e,this.baseSource=t,void 0===e)throw new Error("SourceDynamic didnt receive baseGuest argument");if(void 0===t)throw new Error("SourceDynamic didnt receive baseSource argument")}value(t){return e(this.baseSource,t),this}give(e){return i(e,this.baseGuest),this}pool(){throw Error("No pool in SourceDynamic")}}class L{constructor(e,t){this.baseSource=e,this.applier=t}value(t){return e(this.baseSource,new n(t,(e=>{i(this.applier(e),t)}))),this}}var Q=Object.defineProperty,U=(e,t,r)=>((e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class W{constructor(t,r){U(this,"value"),this.value=r((r=>{e(t,r)}))}}class X{constructor(e,t){this.baseSource=e,this.predicate=t}value(t){return e(this.baseSource,new n(t,(e=>{!0===this.predicate(e)&&i(e,t)}))),this}}var Y=Object.defineProperty,Z=(e,t,r)=>((e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class ${constructor(e){Z(this,"source"),this.source=new M(e)}value(t){return e(this.source,t),this}give(e){return this.source.filled()||this.source.give(e),this}pool(){return this.source.pool()}}var _=Object.defineProperty,ee=(e,t,r)=>((e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);class te{constructor(t){this.baseSource=t,ee(this,"syncGuest",new f),e(t,new S(this.syncGuest))}value(t){return e(this.baseSource,t),this}syncValue(){try{return this.syncGuest.value()}catch{throw new Error("No value in SourceSync")}}}class re{constructor(e,t={}){if(this.constructorFn=e,this.modules=t,void 0===e)throw new Error("PrivateClass didnt receive constructorFn argument")}get(...e){return new this.constructorFn(...e,this.modules)}}class ie{constructor(e){if(this.buildingFn=e,void 0===e)throw new Error("Private didnt receive buildingFn argument")}get(...e){return this.buildingFn(...e)}}export{o as Guest,m as GuestApplied,n as GuestCast,y as GuestDisposable,G as GuestExecutorApplied,b as GuestObject,w as GuestPool,f as GuestSync,S as Patron,z as PatronApplied,C as PatronExecutorApplied,F as PatronOnce,v as PatronPool,ie as Private,re as PrivateClass,N as SourceAll,L as SourceApplied,M as SourceChangeable,J as SourceDynamic,W as SourceExecutorApplied,X as SourceFiltered,R as SourceMap,$ as SourceOnce,H as SourceRace,I as SourceSequence,te as SourceSync,i as give,s as isGuest,A as isPatron,d as isPatronInPools,t as isSource,h as patronPools,l as removePatronFromPools,r as source,e as value};
//# sourceMappingURL=silentium.min.mjs.map
