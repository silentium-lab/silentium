function n(...n){const t=new Set(Object.keys(n)),e=new Set;return function(r){const o={};Object.entries(n).forEach((([n,u])=>{t.add(n),u((function(u){e.add(n),o[n]=u,((n,t)=>n.size>0&&n.size===t.size)(e,t)&&r(Object.values(o))}))}))}}function t(...n){return function(t){n.forEach((n=>{n(t)}))}}function e(n,t){return function(e){n((function(n){e(t(n))}))}}function r(n,t,e){return r=>{try{n(r)}catch(n){n instanceof Error?t(n.message):t(n),e&&e(n)}}}function o(...n){return function(t){let e;const r=o=>{const u=n[o],c=n[o+1];u((function(n){c||(e=n),e&&t(e),c&&!e&&r(o+1)}))};r(0)}}function u(n,t){return function(...e){return t(n(...e))}}function c(n,t,e=0){return function(...r){return n(...function(n,t,e){const r=n.slice(0,e);for(;r.length<e;)r.push(void 0);return r.concat(t)}(r,t,e))}}function i(n){const t=[];return{get:function(...e){const r=n(...e);return n=>{if("destroy"in r)t.push(r.destroy),r.event(n);else{const e=r(n);e&&t.push(e)}return()=>{t.forEach((n=>n()))}}},destroy:function(){t.forEach((n=>n()))}}}function f(n,t){return function(e){const r=t(e);n(r)}}function s(n,t,e){return function(r){n((function(n){t(n)?r(n):void 0!==e&&r(e)}))}}function h(t,e,r,o){let u=null;const c=function(n){u&&u(n)};return function(i){u=i;return n(t,e,r)((function([n,t,e]){n?.[e]&&n[e](t,c)})),function(){if(u=null,!o)return;n(t,e,o)((([n,t,e])=>{n?.[e]?.(t,c)}))}}}function l(n,t){return function(e){n.then((function(n){e(n)})).catch((function(n){t?.(n)}))}}const a=n=>null!=n;var d=Object.defineProperty,w=(n,t,e)=>((n,t,e)=>t in n?d(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);class v{constructor(){w(this,"owners"),w(this,"innerOwner"),this.owners=new Set,this.innerOwner=n=>{this.owners.forEach((t=>{t(n)}))}}owner(){return this.innerOwner}size(){return this.owners.size}has(n){return this.owners.has(n)}add(n){return this.owners.add(n),this}remove(n){return this.owners.delete(n),this}destroy(){return this.owners.forEach((n=>{this.remove(n)})),this}}function y(n){let t=null;const e=n=>{a(n)&&t&&t(n)};return{event:function(r){if(t)throw new Error("Late component gets new user, when another was already connected!");t=r,e(n)},use:function(n){e(n)}}}function p(n){return function(t){let e=!1;n((function(n){e||(e=!0,t(n))}))}}function E(n,t=!1){const e=new v;let r;const o=y();return p(o.event)((function(){n((function(n){r=n,e.owner()(n)}))})),{event:function(n){return o.use(1),t||!a(r)||e.has(n)||n(r),e.add(n),()=>{e.remove(n)}},use:function(n){o.use(1),r=n,e.owner()(n)},touched(){o.use(1)},pool:()=>e,destroy(){e.destroy()}}}function m(n,t=!1){const e=E(n.event,t);return{event:function(n){e.event(n)},use:function(t){e.touched(),n.use(t)}}}function b(n){return m(y(n))}function O(n,t){let e,r=null;const o=()=>{r=null,e?.()};return{event:function(u){return r=new WeakRef(u),e=n((n=>{r&&r.deref()?.(n)})),e&&t&&t(o),o},destroy:o}}function g(n){return function(t){let e=!1;const r=n((function(n){e||t(n)}));return()=>{e=!0,r?.()}}}function z(n){return function(t){return t(n)}}function j(n,t){return n(t)}function S(){return function(){}}function P(){const n=[];return{add(t){const e=O(t);return n.push(e.destroy),e.event},destroy(){n.forEach((n=>n()))}}}function k(t,e){return function(r){t((function(t){const o=[];t.forEach((n=>{let t=n;"function"!=typeof t&&(t=z(t));const r=e(t);o.push(r)}));n(...o)(r)}))}}function x(n,t=null){return n((function(n){t=n})),{[Symbol.toPrimitive]:()=>t,primitive:()=>t,primitiveWithException(){if(null===t)throw new Error("Primitive value is null");return t}}}function W(n){return function(t){const e=[];n((function(n){e.push(n),t(e)}))}}function L(n){return function(t){n((function(n){n.forEach((n=>{t(n)}))}))}}export{n as All,t as Any,e as Applied,r as Catch,o as Chain,u as ConstructorApplied,c as ConstructorArgs,i as ConstructorDestroyable,P as DestroyContainer,O as Destructor,f as ExecutorApplied,s as Filtered,h as FromEvent,l as FromPromise,y as Late,b as LateShared,g as Local,k as Map,z as Of,j as On,p as Once,v as OwnerPool,x as Primitive,W as Sequence,E as Shared,m as SharedSource,L as Stream,S as Void,a as isFilled};
//# sourceMappingURL=silentium.min.mjs.map
