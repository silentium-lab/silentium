const e=e=>null!=e;function t(e){return null!==e&&"object"==typeof e&&"event"in e&&"function"==typeof e.event}function s(e){return null!==e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy}function r(e){return null!==e&&"object"==typeof e&&"use"in e&&"function"==typeof e.use}function n(e,t){if("function"!=typeof e)throw new Error(`${t}: is not function`)}function i(e,s){if(!t(e))throw new Error(`${s}: is not event`)}function o(e,t){if(!r(e))throw new Error(`${t}: is not transport`)}function u(e){return(...t)=>{let s;return{event(r){return s=e.call(r,...t),this},destroy(){return void 0!==s&&s(),this}}}}function a(e){return(...t)=>new e(...t)}var h=Object.defineProperty,l=(e,t,s)=>((e,t,s)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function c(){return new b}class b{constructor(){l(this,"destructors",[])}add(e){return this.destructors.push(e),this}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}var v=Object.defineProperty,f=(e,t,s)=>((e,t,s)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function d(e){return new p(e)}class p{constructor(e){this.eventExecutor=e,f(this,"mbDestructor"),n(e,"Event: eventExecutor")}event(e){return this.mbDestructor=this.eventExecutor(e),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}var w=Object.defineProperty,y=(e,t,s)=>((e,t,s)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function $(e){return new m(e)}class m{constructor(e){this.$base=e,y(this,"destroyed",!1),y(this,"transport",new A(((e,t)=>{this.destroyed||t.use(e)}))),i(e,"Local: $base")}event(e){return this.$base.event(this.transport.child(e)),this}destroy(){return this}}function g(e){return new O(e)}class O{constructor(e){this.value=e}event(e){return e.use(this.value),this}}function P(){return new E}class E{use(){return this}}var T=Object.defineProperty,j=(e,t,s)=>((e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class V{constructor(){j(this,"owners"),j(this,"innerOwner"),this.owners=new Set,this.innerOwner=x((e=>{this.owners.forEach((t=>{t.use(e)}))}))}owner(){return this.innerOwner}size(){return this.owners.size}has(e){return this.owners.has(e)}add(e){return this.owners.add(e),this}remove(e){return this.owners.delete(e),this}destroy(){return this.owners.forEach((e=>{this.remove(e)})),this}}function x(e){return new M(e)}class M{constructor(e){this.transportExecutor=e,n(e,"Transport: transport executor")}use(e){return this.transportExecutor(e),this}}function k(e){return new F(e)}class F{constructor(e){this.executor=e,n(e,"TheTransportEvent: transport executor")}use(e){return this.executor(e)}}class A{constructor(e,t=[],s){this.executor=e,this.args=t,this._child=s,n(e,"ParentTransport: executor")}use(e){if(void 0===this._child)throw new Error("no base transport");return this.executor(e,this._child,...this.args),this}child(e,...t){return new A(this.executor,[...this.args,...t],e)}}var z=Object.defineProperty,C=(e,t,s)=>((e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function B(...e){return new D(...e)}class D{constructor(...e){C(this,"keysKnown"),C(this,"keysFilled",new Set),C(this,"$events"),C(this,"result",{}),C(this,"transport",new A(((e,t,s)=>{var r,n;this.keysFilled.add(s),this.result[s]=e,r=this.keysFilled,n=this.keysKnown,r.size>0&&r.size===n.size&&t.use(Object.values(this.result))}))),this.keysKnown=new Set(Object.keys(e)),this.$events=e}event(e){return Object.entries(this.$events).forEach((([t,s])=>{i(s,"All: item"),this.keysKnown.add(t),s.event(this.transport.child(e,t))})),this}}var K=Object.defineProperty,S=(e,t,s)=>((e,t,s)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function N(...e){return new _(...e)}class _{constructor(...e){S(this,"$events"),this.$events=e}event(e){return this.$events.forEach((t=>{i(t,"Any: item"),t.event(e)})),this}}var I=Object.defineProperty,L=(e,t,s)=>((e,t,s)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function W(e,t){return new q(e,t)}class q{constructor(e,t){this.$base=e,this.applier=t,L(this,"transport",new A(((e,t)=>{t.use(this.applier(e))}))),i(e,"Applied: base")}event(e){return this.$base.event(this.transport.child(e)),this}}function G(e,t,s){return new H(e,t,s)}class H{constructor(e,t,s){this.$base=e,this.errorMessage=t,this.errorOriginal=s,i(e,"Catch: base"),o(t,"Catch: errorMessage"),void 0!==s&&o(s,"Catch: errorOriginal")}event(e){try{this.$base.event(e)}catch(e){e instanceof Error?this.errorMessage.use(e.message):this.errorMessage.use(e),this.errorOriginal&&this.errorOriginal.use(e)}return this}}var J=Object.defineProperty,Q=(e,t,s)=>((e,t,s)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function R(...e){return new U(...e)}class U{constructor(...e){Q(this,"$events"),Q(this,"lastValue"),Q(this,"handleEvent",((e,t)=>{const s=this.$events[e],r=this.$events[e+1];s.event(this.oneEventTransport.child(t,r,e))})),Q(this,"oneEventTransport",new A(((e,t,s,r)=>{s||(this.lastValue=e),this.lastValue&&t.use(this.lastValue),s&&!this.lastValue&&this.handleEvent(r+1,t)}))),this.$events=e}event(e){return this.handleEvent(0,e),this}}function X(e,t){return new Y(e,t)}class Y{constructor(e,t){this.$base=e,this.applier=t,i(e,"ExecutorApplied: base")}event(e){const t=this.applier(e.use.bind(e));return this.$base.event(x(t)),this}}var Z=Object.defineProperty,ee=(e,t,s)=>((e,t,s)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function te(e,t,s){return new se(e,t,s)}class se{constructor(e,t,s){this.$base=e,this.predicate=t,this.defaultValue=s,ee(this,"parent",new A(((e,t)=>{this.predicate(e)?t.use(e):void 0!==this.defaultValue&&t.use(this.defaultValue)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var re=Object.defineProperty,ne=(e,t,s)=>((e,t,s)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function ie(e,t,s,r){return new oe(e,t,s,r)}class oe{constructor(e,t,s,r){this.$emitter=e,this.$eventName=t,this.$subscribeMethod=s,this.$unsubscribeMethod=r,ne(this,"lastTransport",null),ne(this,"handler",(e=>{this.lastTransport&&this.lastTransport.use(e)})),ne(this,"parent",new A((([e,t,s],r)=>{this.lastTransport=r,e?.[s]&&e[s](t,this.handler)})))}event(e){return B(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(e)),this}destroy(){if(this.lastTransport=null,!this.$unsubscribeMethod)return this;return B(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(x((([e,t,s])=>{e?.[s]?.(t,this.handler)}))),this}}function ue(e,t){return new ae(e,t)}class ae{constructor(e,t){this.p=e,this.errorOwner=t}event(e){return this.p.then((function(t){e.use(t)})).catch((e=>{this.errorOwner?.use(e)})),this}}var he=Object.defineProperty,le=(e,t,s)=>((e,t,s)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function ce(e){return new be(e)}class be{constructor(t){this.v=t,le(this,"lateTransport",null),le(this,"notify",(t=>{e(t)&&this.lateTransport&&this.lateTransport.use(t)}))}event(e){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=e,this.notify(this.v),this}use(e){return this.notify(e),this}}var ve=Object.defineProperty,fe=(e,t,s)=>((e,t,s)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function de(e){return new pe(e)}class pe{constructor(e){this.$base=e,fe(this,"isFilled",!1),fe(this,"parent",new A(((e,t)=>{this.isFilled||(this.isFilled=!0,t.use(e))})))}event(e){return this.$base.event(this.parent.child(e)),this}}var we=Object.defineProperty,ye=(e,t,s)=>((e,t,s)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function $e(e,t=!1){return new me(e,t)}class me{constructor(e,t=!1){this.$base=e,this.stateless=t,ye(this,"ownersPool",new V),ye(this,"lastValue"),ye(this,"calls",ce()),ye(this,"firstCallTransport",x((e=>{this.lastValue=e,this.ownersPool.owner().use(e)}))),de(this.calls).event(x((()=>{this.$base.event(this.firstCallTransport)})))}event(t){return this.calls.use(1),this.stateless||!e(this.lastValue)||this.ownersPool.has(t)||t.use(this.lastValue),this.ownersPool.add(t),this}use(e){return this.calls.use(1),this.lastValue=e,this.ownersPool.owner().use(e),this}touched(){this.calls.use(1)}pool(){return this.ownersPool}destroy(){return this.ownersPool.destroy()}}var ge=Object.defineProperty,Oe=(e,t,s)=>((e,t,s)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Pe(e,t=!1){return new Ee(e,t)}class Ee{constructor(e,t=!1){this.$base=e,Oe(this,"$sharedBase"),this.$sharedBase=$e(this.$base,t)}event(e){return this.$sharedBase.event(e),this}use(e){return this.$sharedBase.touched(),this.$base.use(e),this}}var Te=Object.defineProperty,je=(e,t,s)=>((e,t,s)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Ve(e){return new xe(e)}class xe{constructor(e){je(this,"$event"),this.$event=Pe(ce(e))}event(e){return this.$event.event(e),this}use(e){return this.$event.use(e),this}}var Me=Object.defineProperty,ke=(e,t,s)=>((e,t,s)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Fe(e,t){return new Ae(e,t)}class Ae{constructor(e,s){this.$base=e,this.$target=s,ke(this,"parent",new A(((e,s)=>{const r=[];e.forEach((e=>{let s=e;t(s)||(s=g(s));const n=this.$target.use(s);r.push(n)}));B(...r).event(s)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var ze=Object.defineProperty,Ce=(e,t,s)=>((e,t,s)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Be(e,t=null){return new De(e,t)}class De{constructor(e,t=null){this.$base=e,this.theValue=t,Ce(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(x((e=>{this.theValue=e}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var Ke=Object.defineProperty,Se=(e,t,s)=>((e,t,s)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function Ne(e){return new _e(e)}class _e{constructor(e){this.$base=e,Se(this,"result",[]),Se(this,"parent",new A(((e,t)=>{this.result.push(e),t.use(this.result)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var Ie=Object.defineProperty,Le=(e,t,s)=>((e,t,s)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function We(e){return new qe(e)}class qe{constructor(e){this.$base=e,Le(this,"parent",new A(((e,t)=>{e.forEach((e=>{t.use(e)}))})))}event(e){return this.$base.event(this.parent.child(e)),this}}function Ge(e,t){return new He(e,t)}class He{constructor(e,t){this.baseTransport=e,this.applier=t}use(e){return this.applier(this.baseTransport.use(e))}}function Je(e,t,s=0){return new Qe(e,t,s)}class Qe{constructor(e,t,s=0){this.baseTransport=e,this.args=t,this.startFromArgIndex=s}use(e){return this.baseTransport.use(function(e,t,s){const r=e.slice(0,s);for(;r.length<s;)r.push(void 0);return r.concat(t)}(e,this.args,this.startFromArgIndex))}}var Re=Object.defineProperty,Ue=(e,t,s)=>((e,t,s)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Xe(e){return new Ye(e)}class Ye{constructor(e){this.baseTransport=e,Ue(this,"destructors",[])}use(e){const t=this.baseTransport.use(e);return s(t)&&this.destructors.push(t),t}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}export{B as All,N as Any,W as Applied,G as Catch,R as Chain,u as Component,a as ComponentClass,c as DestroyContainer,d as Event,X as ExecutorApplied,te as Filtered,ie as FromEvent,ue as FromPromise,ce as Late,Ve as LateShared,$ as Local,Fe as Map,g as Of,de as Once,V as OwnerPool,A as ParentTransport,Be as Primitive,Ne as Sequence,$e as Shared,Pe as SharedSource,We as Stream,U as TheChain,ae as TheFromPromise,He as TheTransportApplied,Qe as TheTransportArgs,x as Transport,Ge as TransportApplied,Je as TransportArgs,Xe as TransportDestroyable,k as TransportEvent,P as Void,i as ensureEvent,n as ensureFunction,o as ensureTransport,s as isDestroyable,t as isEvent,e as isFilled,r as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
