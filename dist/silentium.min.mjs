const n=(...n)=>{const t=new Set(Object.keys(n)),e=new Set;return function(o){const r={};Object.entries(n).forEach((([n,i])=>{t.add(n),i((function(i){e.add(n),r[n]=i,((n,t)=>n.size>0&&n.size===t.size)(e,t)&&o(Object.values(r))}))}))}},t=(...n)=>function(t){n.forEach((n=>{n(t)}))},e=(n,t)=>function(e){n((function(n){e(t(n))}))},o=(...n)=>function(t){let e;const o=r=>{const i=n[r],u=n[r+1];i((function(n){u||(e=n),e&&t(e),u&&!e&&o(r+1)}))};o(0)},r=(n,t)=>function(e){const o=t(e);n(o)},i=(n,t,e)=>function(o){n((function(n){t(n)?o(n):void 0!==e&&o(e)}))},u=(t,e,o,r)=>{let i=null;const u=function(n){i&&i(n)};return function(c){i=c;return n(t,e,o)((function([n,t,e]){n?.[e]&&n[e](t,u)})),function(){if(i=null,!r)return;n(t,e,r)((([n,t,e])=>{n?.[e]?.(t,u)}))}}},c=(n,t)=>function(e){n.then((function(n){e(n)})).catch((function(n){t?.(n)}))},s=n=>null!=n;var f=Object.defineProperty,l=(n,t,e)=>((n,t,e)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e);class a{constructor(){l(this,"owners"),l(this,"innerOwner"),this.owners=new Set,this.innerOwner=n=>{this.owners.forEach((t=>{t(n)}))}}owner(){return this.innerOwner}size(){return this.owners.size}has(n){return this.owners.has(n)}add(n){return this.owners.add(n),this}remove(n){return this.owners.delete(n),this}destroy(){return this.owners.forEach((n=>{this.remove(n)})),this}}const h=n=>{let t=null;const e=n=>{s(n)&&t&&t(n)};return{value:function(o){if(t)throw new Error("Late component gets new user, when another was already connected!");t=o,e(n)},give:function(n){e(n)}}},v=n=>function(t){let e=!1;n((function(n){e||(e=!0,t(n))}))},w=(n,t=!1)=>{const e=new a;let o;const r=h();return v(r.value)((function(){n((function(n){o=n,e.owner()(n)}))})),{value:function(n){return r.give(1),t||!s(o)||e.has(n)||n(o),e.add(n),()=>{e.remove(n)}},give:function(n){o=n,e.owner()(n)},pool:()=>e,destroy(){e.destroy()}}},d=(n,t=!1)=>{const e=w(n.value,t);return{value:function(n){e.value(n)},give:function(t){n.give(t)}}},p=n=>{const t=d(h(n));return{value:t.value,give:t.give}},y=(n,t)=>function(...e){return t(n(...e))},g=(n,t,e=0)=>function(...o){return n(...function(n,t,e){const o=n.slice(0,e);for(;o.length<e;)o.push(void 0);return o.concat(t)}(o,t,e))};const m=n=>{const t=[];return{get:function(...e){const o=n(...e);return t.push(o),o},destroy:function(){t.forEach((n=>n.destroy()))}}},E=(n,t)=>{let e,o=null;const r=()=>{o=null,e?.()};return{value:function(i){return o=i,e=n((n=>{o&&o(n)})),e&&t&&t(r),r},destroy:r}},b=n=>function(t){let e=!1;const o=n((function(n){e||t(n)}));return()=>{e=!0,o?.()}},O=n=>function(t){return t(n)},z=(n,t)=>n(t),j=()=>function(){},S=(t,e)=>function(o){t((function(t){const r=[];t.forEach((n=>{let t=n;"function"!=typeof t&&(t=O(t));const o=e(t);r.push(o)}));n(...r)(o)}))},P=(n,t=null)=>(n((function(n){t=n})),{[Symbol.toPrimitive]:()=>t,primitive:()=>t,primitiveWithException(){if(null===t)throw new Error("Primitive value is null");return t}}),x=n=>function(t){const e=[];n((function(n){e.push(n),t(e)}))},k=n=>function(t){n((function(n){n.forEach((n=>{t(n)}))}))};export{a as OwnerPool,j as _void,n as all,t as any,e as applied,o as chain,E as destructor,r as executorApplied,i as filtered,u as fromEvent,c as fromPromise,s as isFilled,h as late,p as lateShared,y as lazyApplied,g as lazyArgs,m as lazyDestroyable,b as local,S as map,O as of,z as on,v as once,P as primitive,x as sequence,w as shared,d as sharedSource,k as stream};
//# sourceMappingURL=silentium.min.mjs.map
