const e=e=>null!=e;function t(e){return null!==e&&"object"==typeof e&&"event"in e&&"function"==typeof e.event}function s(e){return null!==e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy}function r(e){return null!==e&&"object"==typeof e&&"use"in e&&"function"==typeof e.use}function n(e,t){if("function"!=typeof e)throw new Error(`${t}: is not function`)}function i(e,s){if(!t(e))throw new Error(`${s}: is not event`)}function o(e,t){if(!r(e))throw new Error(`${t}: is not transport`)}function u(e){return(...t)=>{let s;return{event(r){return s=e.call(r,...t),this},destroy(){return void 0!==s&&s(),this}}}}var a=Object.defineProperty,h=(e,t,s)=>((e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function l(){return new c}class c{constructor(){h(this,"destructors",[])}add(e){return this.destructors.push(e),this}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}var b=Object.defineProperty,v=(e,t,s)=>((e,t,s)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function f(e){return new d(e)}class d{constructor(e){this.eventExecutor=e,v(this,"mbDestructor"),n(e,"Event: eventExecutor")}event(e){return this.mbDestructor=this.eventExecutor(e),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}var p=Object.defineProperty,w=(e,t,s)=>((e,t,s)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function y(e){return new $(e)}class ${constructor(e){this.$base=e,w(this,"destroyed",!1),w(this,"transport",new F(((e,t)=>{this.destroyed||t.use(e)}))),i(e,"Local: $base")}event(e){return this.$base.event(this.transport.child(e)),this}destroy(){return this}}function m(e){return new g(e)}class g{constructor(e){this.value=e}event(e){return e.use(this.value),this}}function O(){return new P}class P{use(){return this}}var E=Object.defineProperty,T=(e,t,s)=>((e,t,s)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class j{constructor(){T(this,"owners"),T(this,"innerOwner"),this.owners=new Set,this.innerOwner=V((e=>{this.owners.forEach((t=>{t.use(e)}))}))}owner(){return this.innerOwner}size(){return this.owners.size}has(e){return this.owners.has(e)}add(e){return this.owners.add(e),this}remove(e){return this.owners.delete(e),this}destroy(){return this.owners.forEach((e=>{this.remove(e)})),this}}function V(e){return new x(e)}class x{constructor(e){this.transportExecutor=e,n(e,"Transport: transport executor")}use(e){return this.transportExecutor(e),this}}function M(e){return new k(e)}class k{constructor(e){this.executor=e,n(e,"TheTransportEvent: transport executor")}use(e){return this.executor(e)}}class F{constructor(e,t=[],s){this.executor=e,this.args=t,this._child=s,n(e,"ParentTransport: executor")}use(e){if(void 0===this._child)throw new Error("no base transport");return this.executor(e,this._child,...this.args),this}child(e,...t){return new F(this.executor,[...this.args,...t],e)}}var A=Object.defineProperty,z=(e,t,s)=>((e,t,s)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function C(...e){return new B(...e)}class B{constructor(...e){z(this,"keysKnown"),z(this,"keysFilled",new Set),z(this,"$events"),z(this,"result",{}),z(this,"transport",new F(((e,t,s)=>{var r,n;this.keysFilled.add(s),this.result[s]=e,r=this.keysFilled,n=this.keysKnown,r.size>0&&r.size===n.size&&t.use(Object.values(this.result))}))),this.keysKnown=new Set(Object.keys(e)),this.$events=e}event(e){return Object.entries(this.$events).forEach((([t,s])=>{i(s,"All: item"),this.keysKnown.add(t),s.event(this.transport.child(e,t))})),this}}var D=Object.defineProperty,K=(e,t,s)=>((e,t,s)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function S(...e){return new N(...e)}class N{constructor(...e){K(this,"$events"),this.$events=e}event(e){return this.$events.forEach((t=>{i(t,"Any: item"),t.event(e)})),this}}var _=Object.defineProperty,I=(e,t,s)=>((e,t,s)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function L(e,t){return new W(e,t)}class W{constructor(e,t){this.$base=e,this.applier=t,I(this,"transport",new F(((e,t)=>{t.use(this.applier(e))}))),i(e,"Applied: base")}event(e){return this.$base.event(this.transport.child(e)),this}}function q(e,t,s){return new G(e,t,s)}class G{constructor(e,t,s){this.$base=e,this.errorMessage=t,this.errorOriginal=s,i(e,"Catch: base"),o(t,"Catch: errorMessage"),void 0!==s&&o(s,"Catch: errorOriginal")}event(e){try{this.$base.event(e)}catch(e){e instanceof Error?this.errorMessage.use(e.message):this.errorMessage.use(e),this.errorOriginal&&this.errorOriginal.use(e)}return this}}var H=Object.defineProperty,J=(e,t,s)=>((e,t,s)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function Q(...e){return new R(...e)}class R{constructor(...e){J(this,"$events"),J(this,"lastValue"),J(this,"handleEvent",((e,t)=>{const s=this.$events[e],r=this.$events[e+1];s.event(this.oneEventTransport.child(t,r,e))})),J(this,"oneEventTransport",new F(((e,t,s,r)=>{s||(this.lastValue=e),this.lastValue&&t.use(this.lastValue),s&&!this.lastValue&&this.handleEvent(r+1,t)}))),this.$events=e}event(e){return this.handleEvent(0,e),this}}function U(e,t){return new X(e,t)}class X{constructor(e,t){this.$base=e,this.applier=t,i(e,"ExecutorApplied: base")}event(e){const t=this.applier(e.use.bind(e));return this.$base.event(V(t)),this}}var Y=Object.defineProperty,Z=(e,t,s)=>((e,t,s)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function ee(e,t,s){return new te(e,t,s)}class te{constructor(e,t,s){this.$base=e,this.predicate=t,this.defaultValue=s,Z(this,"parent",new F(((e,t)=>{this.predicate(e)?t.use(e):void 0!==this.defaultValue&&t.use(this.defaultValue)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var se=Object.defineProperty,re=(e,t,s)=>((e,t,s)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function ne(e,t,s,r){return new ie(e,t,s,r)}class ie{constructor(e,t,s,r){this.$emitter=e,this.$eventName=t,this.$subscribeMethod=s,this.$unsubscribeMethod=r,re(this,"lastTransport",null),re(this,"handler",(e=>{this.lastTransport&&this.lastTransport.use(e)})),re(this,"parent",new F((([e,t,s],r)=>{this.lastTransport=r,e?.[s]&&e[s](t,this.handler)})))}event(e){return C(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(e)),this}destroy(){if(this.lastTransport=null,!this.$unsubscribeMethod)return this;return C(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(V((([e,t,s])=>{e?.[s]?.(t,this.handler)}))),this}}function oe(e,t){return new ue(e,t)}class ue{constructor(e,t){this.p=e,this.errorOwner=t}event(e){return this.p.then((function(t){e.use(t)})).catch((e=>{this.errorOwner?.use(e)})),this}}var ae=Object.defineProperty,he=(e,t,s)=>((e,t,s)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function le(e){return new ce(e)}class ce{constructor(t){this.v=t,he(this,"lateTransport",null),he(this,"notify",(t=>{e(t)&&this.lateTransport&&this.lateTransport.use(t)}))}event(e){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=e,this.notify(this.v),this}use(e){return this.notify(e),this}}var be=Object.defineProperty,ve=(e,t,s)=>((e,t,s)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function fe(e){return new de(e)}class de{constructor(e){this.$base=e,ve(this,"isFilled",!1),ve(this,"parent",new F(((e,t)=>{this.isFilled||(this.isFilled=!0,t.use(e))})))}event(e){return this.$base.event(this.parent.child(e)),this}}var pe=Object.defineProperty,we=(e,t,s)=>((e,t,s)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function ye(e,t=!1){return new $e(e,t)}class $e{constructor(e,t=!1){this.$base=e,this.stateless=t,we(this,"ownersPool",new j),we(this,"lastValue"),we(this,"calls",le()),we(this,"firstCallTransport",V((e=>{this.lastValue=e,this.ownersPool.owner().use(e)}))),fe(this.calls).event(V((()=>{this.$base.event(this.firstCallTransport)})))}event(t){return this.calls.use(1),this.stateless||!e(this.lastValue)||this.ownersPool.has(t)||t.use(this.lastValue),this.ownersPool.add(t),this}use(e){return this.calls.use(1),this.lastValue=e,this.ownersPool.owner().use(e),this}touched(){this.calls.use(1)}pool(){return this.ownersPool}destroy(){return this.ownersPool.destroy()}}var me=Object.defineProperty,ge=(e,t,s)=>((e,t,s)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Oe(e,t=!1){return new Pe(e,t)}class Pe{constructor(e,t=!1){this.$base=e,ge(this,"$sharedBase"),this.$sharedBase=ye(this.$base,t)}event(e){return this.$sharedBase.event(e),this}use(e){return this.$sharedBase.touched(),this.$base.use(e),this}}var Ee=Object.defineProperty,Te=(e,t,s)=>((e,t,s)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function je(e){return new Ve(e)}class Ve{constructor(e){Te(this,"$event"),this.$event=Oe(le(e))}event(e){return this.$event.event(e),this}use(e){return this.$event.use(e),this}}var xe=Object.defineProperty,Me=(e,t,s)=>((e,t,s)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function ke(e,t){return new Fe(e,t)}class Fe{constructor(e,s){this.$base=e,this.$target=s,Me(this,"parent",new F(((e,s)=>{const r=[];e.forEach((e=>{let s=e;t(s)||(s=m(s));const n=this.$target.use(s);r.push(n)}));C(...r).event(s)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var Ae=Object.defineProperty,ze=(e,t,s)=>((e,t,s)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Ce(e,t=null){return new Be(e,t)}class Be{constructor(e,t=null){this.$base=e,this.theValue=t,ze(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(V((e=>{this.theValue=e}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var De=Object.defineProperty,Ke=(e,t,s)=>((e,t,s)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function Se(e){return new Ne(e)}class Ne{constructor(e){this.$base=e,Ke(this,"result",[]),Ke(this,"parent",new F(((e,t)=>{this.result.push(e),t.use(this.result)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var _e=Object.defineProperty,Ie=(e,t,s)=>((e,t,s)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Le(e){return new We(e)}class We{constructor(e){this.$base=e,Ie(this,"parent",new F(((e,t)=>{e.forEach((e=>{t.use(e)}))})))}event(e){return this.$base.event(this.parent.child(e)),this}}function qe(e,t){return new Ge(e,t)}class Ge{constructor(e,t){this.baseTransport=e,this.applier=t}use(e){return this.applier(this.baseTransport.use(e))}}function He(e,t,s=0){return new Je(e,t,s)}class Je{constructor(e,t,s=0){this.baseTransport=e,this.args=t,this.startFromArgIndex=s}use(e){return this.baseTransport.use(function(e,t,s){const r=e.slice(0,s);for(;r.length<s;)r.push(void 0);return r.concat(t)}(e,this.args,this.startFromArgIndex))}}var Qe=Object.defineProperty,Re=(e,t,s)=>((e,t,s)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Ue(e){return new Xe(e)}class Xe{constructor(e){this.baseTransport=e,Re(this,"destructors",[])}use(e){const t=this.baseTransport.use(e);return s(t)&&this.destructors.push(t),t}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}export{C as All,S as Any,L as Applied,q as Catch,Q as Chain,u as Component,l as DestroyContainer,f as Event,U as ExecutorApplied,ee as Filtered,ne as FromEvent,oe as FromPromise,le as Late,je as LateShared,y as Local,ke as Map,m as Of,fe as Once,j as OwnerPool,F as ParentTransport,Ce as Primitive,Se as Sequence,ye as Shared,Oe as SharedSource,Le as Stream,R as TheChain,ue as TheFromPromise,Ge as TheTransportApplied,Je as TheTransportArgs,V as Transport,qe as TransportApplied,He as TransportArgs,Ue as TransportDestroyable,M as TransportEvent,O as Void,i as ensureEvent,n as ensureFunction,o as ensureTransport,s as isDestroyable,t as isEvent,e as isFilled,r as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
