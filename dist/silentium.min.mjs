const e=e=>null!=e;function t(e){return null!==e&&"object"==typeof e&&"event"in e&&"function"==typeof e.event}function s(e){return null!==e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy}function r(e){return null!==e&&"object"==typeof e&&"use"in e&&"function"==typeof e.use}function n(e,t){if("function"!=typeof e)throw new Error(`${t}: is not function`)}function i(e,s){if(!t(e))throw new Error(`${s}: is not event`)}function o(e,t){if(!r(e))throw new Error(`${t}: is not transport`)}var u=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function h(){return new l}class l{constructor(){a(this,"destructors",[])}add(e){return this.destructors.push(e),this}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}var c=Object.defineProperty,b=(e,t,s)=>((e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function v(e){return new f(e)}class f{constructor(e){this.eventExecutor=e,b(this,"mbDestructor"),n(e,"Event: eventExecutor")}event(e){return this.mbDestructor=this.eventExecutor(e),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}var p=Object.defineProperty,d=(e,t,s)=>((e,t,s)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function w(e){return new y(e)}class y{constructor(e){this.$base=e,d(this,"destroyed",!1),d(this,"transport",new k(((e,t)=>{this.destroyed||t.use(e)}))),i(e,"Local: $base")}event(e){return this.$base.event(this.transport.child(e)),this}destroy(){return this}}function $(e){return new m(e)}class m{constructor(e){this.value=e}event(e){return e.use(this.value),this}}function g(){return new O}class O{use(){return this}}var P=Object.defineProperty,E=(e,t,s)=>((e,t,s)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class T{constructor(){E(this,"owners"),E(this,"innerOwner"),this.owners=new Set,this.innerOwner=j((e=>{this.owners.forEach((t=>{t.use(e)}))}))}owner(){return this.innerOwner}size(){return this.owners.size}has(e){return this.owners.has(e)}add(e){return this.owners.add(e),this}remove(e){return this.owners.delete(e),this}destroy(){return this.owners.forEach((e=>{this.remove(e)})),this}}function j(e){return new V(e)}class V{constructor(e){this.transportExecutor=e,n(e,"Transport: transport executor")}use(e){return this.transportExecutor(e),this}}function x(e){return new M(e)}class M{constructor(e){this.executor=e,n(e,"TheTransportEvent: transport executor")}use(e){return this.executor(e)}}class k{constructor(e,t=[],s){this.executor=e,this.args=t,this._child=s,n(e,"ParentTransport: executor")}use(e){if(void 0===this._child)throw new Error("no base transport");return this.executor(e,this._child,...this.args),this}child(e,...t){return new k(this.executor,[...this.args,...t],e)}}var F=Object.defineProperty,A=(e,t,s)=>((e,t,s)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function z(...e){return new C(...e)}class C{constructor(...e){A(this,"keysKnown"),A(this,"keysFilled",new Set),A(this,"$events"),A(this,"result",{}),A(this,"transport",new k(((e,t,s)=>{var r,n;this.keysFilled.add(s),this.result[s]=e,r=this.keysFilled,n=this.keysKnown,r.size>0&&r.size===n.size&&t.use(Object.values(this.result))}))),this.keysKnown=new Set(Object.keys(e)),this.$events=e}event(e){return Object.entries(this.$events).forEach((([t,s])=>{i(s,"All: item"),this.keysKnown.add(t),s.event(this.transport.child(e,t))})),this}}var B=Object.defineProperty,D=(e,t,s)=>((e,t,s)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function K(...e){return new S(...e)}class S{constructor(...e){D(this,"$events"),this.$events=e}event(e){return this.$events.forEach((t=>{i(t,"Any: item"),t.event(e)})),this}}var N=Object.defineProperty,_=(e,t,s)=>((e,t,s)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function I(e,t){return new L(e,t)}class L{constructor(e,t){this.$base=e,this.applier=t,_(this,"transport",new k(((e,t)=>{t.use(this.applier(e))}))),i(e,"Applied: base")}event(e){return this.$base.event(this.transport.child(e)),this}}function W(e,t,s){return new q(e,t,s)}class q{constructor(e,t,s){this.$base=e,this.errorMessage=t,this.errorOriginal=s,i(e,"Catch: base"),o(t,"Catch: errorMessage"),void 0!==s&&o(s,"Catch: errorOriginal")}event(e){try{this.$base.event(e)}catch(e){e instanceof Error?this.errorMessage.use(e.message):this.errorMessage.use(e),this.errorOriginal&&this.errorOriginal.use(e)}return this}}var G=Object.defineProperty,H=(e,t,s)=>((e,t,s)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function J(...e){return new Q(...e)}class Q{constructor(...e){H(this,"$events"),H(this,"lastValue"),H(this,"handleEvent",((e,t)=>{const s=this.$events[e],r=this.$events[e+1];s.event(this.oneEventTransport.child(t,r,e))})),H(this,"oneEventTransport",new k(((e,t,s,r)=>{s||(this.lastValue=e),this.lastValue&&t.use(this.lastValue),s&&!this.lastValue&&this.handleEvent(r+1,t)}))),this.$events=e}event(e){return this.handleEvent(0,e),this}}function R(e,t){return new U(e,t)}class U{constructor(e,t){this.$base=e,this.applier=t,i(e,"ExecutorApplied: base")}event(e){const t=this.applier(e.use.bind(e));return this.$base.event(j(t)),this}}var X=Object.defineProperty,Y=(e,t,s)=>((e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Z(e,t,s){return new ee(e,t,s)}class ee{constructor(e,t,s){this.$base=e,this.predicate=t,this.defaultValue=s,Y(this,"parent",new k(((e,t)=>{this.predicate(e)?t.use(e):void 0!==this.defaultValue&&t.use(this.defaultValue)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var te=Object.defineProperty,se=(e,t,s)=>((e,t,s)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function re(e,t,s,r){return new ne(e,t,s,r)}class ne{constructor(e,t,s,r){this.$emitter=e,this.$eventName=t,this.$subscribeMethod=s,this.$unsubscribeMethod=r,se(this,"lastTransport",null),se(this,"handler",(e=>{this.lastTransport&&this.lastTransport.use(e)})),se(this,"parent",new k((([e,t,s],r)=>{this.lastTransport=r,e?.[s]&&e[s](t,this.handler)})))}event(e){return z(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(e)),this}destroy(){if(this.lastTransport=null,!this.$unsubscribeMethod)return this;return z(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(j((([e,t,s])=>{e?.[s]?.(t,this.handler)}))),this}}function ie(e,t){return new oe(e,t)}class oe{constructor(e,t){this.p=e,this.errorOwner=t}event(e){return this.p.then((function(t){e.use(t)})).catch((e=>{this.errorOwner?.use(e)})),this}}var ue=Object.defineProperty,ae=(e,t,s)=>((e,t,s)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function he(e){return new le(e)}class le{constructor(t){this.v=t,ae(this,"lateTransport",null),ae(this,"notify",(t=>{e(t)&&this.lateTransport&&this.lateTransport.use(t)}))}event(e){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=e,this.notify(this.v),this}use(e){return this.notify(e),this}}var ce=Object.defineProperty,be=(e,t,s)=>((e,t,s)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function ve(e){return new fe(e)}class fe{constructor(e){this.$base=e,be(this,"isFilled",!1),be(this,"parent",new k(((e,t)=>{this.isFilled||(this.isFilled=!0,t.use(e))})))}event(e){return this.$base.event(this.parent.child(e)),this}}var pe=Object.defineProperty,de=(e,t,s)=>((e,t,s)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function we(e,t=!1){return new ye(e,t)}class ye{constructor(e,t=!1){this.$base=e,this.stateless=t,de(this,"ownersPool",new T),de(this,"lastValue"),de(this,"calls",he()),de(this,"firstCallTransport",j((e=>{this.lastValue=e,this.ownersPool.owner().use(e)}))),ve(this.calls).event(j((()=>{this.$base.event(this.firstCallTransport)})))}event(t){return this.calls.use(1),this.stateless||!e(this.lastValue)||this.ownersPool.has(t)||t.use(this.lastValue),this.ownersPool.add(t),this}use(e){return this.calls.use(1),this.lastValue=e,this.ownersPool.owner().use(e),this}touched(){this.calls.use(1)}pool(){return this.ownersPool}destroy(){return this.ownersPool.destroy()}}var $e=Object.defineProperty,me=(e,t,s)=>((e,t,s)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function ge(e,t=!1){return new Oe(e,t)}class Oe{constructor(e,t=!1){this.$base=e,me(this,"$sharedBase"),this.$sharedBase=we(this.$base,t)}event(e){return this.$sharedBase.event(e),this}use(e){return this.$sharedBase.touched(),this.$base.use(e),this}}var Pe=Object.defineProperty,Ee=(e,t,s)=>((e,t,s)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Te(e){return new je(e)}class je{constructor(e){Ee(this,"$event"),this.$event=ge(he(e))}event(e){return this.$event.event(e),this}use(e){return this.$event.use(e),this}}var Ve=Object.defineProperty,xe=(e,t,s)=>((e,t,s)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Me(e,t){return new ke(e,t)}class ke{constructor(e,s){this.$base=e,this.$target=s,xe(this,"parent",new k(((e,s)=>{const r=[];e.forEach((e=>{let s=e;t(s)||(s=$(s));const n=this.$target.use(s);r.push(n)}));z(...r).event(s)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var Fe=Object.defineProperty,Ae=(e,t,s)=>((e,t,s)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function ze(e,t=null){return new Ce(e,t)}class Ce{constructor(e,t=null){this.$base=e,this.theValue=t,Ae(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(j((e=>{this.theValue=e}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var Be=Object.defineProperty,De=(e,t,s)=>((e,t,s)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function Ke(e){return new Se(e)}class Se{constructor(e){this.$base=e,De(this,"result",[]),De(this,"parent",new k(((e,t)=>{this.result.push(e),t.use(this.result)})))}event(e){return this.$base.event(this.parent.child(e)),this}}var Ne=Object.defineProperty,_e=(e,t,s)=>((e,t,s)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Ie(e){return new Le(e)}class Le{constructor(e){this.$base=e,_e(this,"parent",new k(((e,t)=>{e.forEach((e=>{t.use(e)}))})))}event(e){return this.$base.event(this.parent.child(e)),this}}function We(e,t){return new qe(e,t)}class qe{constructor(e,t){this.baseTransport=e,this.applier=t}use(e){return this.applier(this.baseTransport.use(e))}}function Ge(e,t,s=0){return new He(e,t,s)}class He{constructor(e,t,s=0){this.baseTransport=e,this.args=t,this.startFromArgIndex=s}use(e){return this.baseTransport.use(function(e,t,s){const r=e.slice(0,s);for(;r.length<s;)r.push(void 0);return r.concat(t)}(e,this.args,this.startFromArgIndex))}}var Je=Object.defineProperty,Qe=(e,t,s)=>((e,t,s)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,t+"",s);function Re(e){return new Ue(e)}class Ue{constructor(e){this.baseTransport=e,Qe(this,"destructors",[])}use(e){const t=this.baseTransport.use(e);return s(t)&&this.destructors.push(t),t}destroy(){return this.destructors.forEach((e=>e.destroy())),this}}export{z as All,K as Any,I as Applied,W as Catch,J as Chain,h as DestroyContainer,v as Event,R as ExecutorApplied,Z as Filtered,re as FromEvent,ie as FromPromise,he as Late,Te as LateShared,w as Local,Me as Map,$ as Of,ve as Once,T as OwnerPool,k as ParentTransport,ze as Primitive,Ke as Sequence,we as Shared,ge as SharedSource,Ie as Stream,Q as TheChain,oe as TheFromPromise,qe as TheTransportApplied,He as TheTransportArgs,j as Transport,We as TransportApplied,Ge as TransportArgs,Re as TransportDestroyable,x as TransportEvent,g as Void,i as ensureEvent,n as ensureFunction,o as ensureTransport,s as isDestroyable,t as isEvent,e as isFilled,r as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
