function t(t){return(...e)=>{let r;return{event(s){return r=t.call(s,...e),this},destroy(){return void 0!==r&&r(),this}}}}function e(t){return(...e)=>new t(...e)}var r=Object.defineProperty,s=(t,e,s)=>((t,e,s)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s)(t,e+"",s);function n(){return new i}class i{constructor(){s(this,"destructors",[])}add(t){return this.destructors.push(t),t}destroy(){return this.destructors.forEach((t=>t.destroy())),this}}const o=t=>null!=t;function u(t){return null!==t&&"object"==typeof t&&"event"in t&&"function"==typeof t.event}function a(t){return null!==t&&"object"==typeof t&&"destroy"in t&&"function"==typeof t.destroy}function h(t){return null!==t&&"object"==typeof t&&"use"in t&&"function"==typeof t.use}function c(t,e){if("function"!=typeof t)throw new Error(`${e}: is not function`)}function l(t,e){if(!u(t))throw new Error(`${e}: is not event`)}function b(t,e){if(!h(t))throw new Error(`${e}: is not transport`)}var f=Object.defineProperty,v=(t,e,r)=>((t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function p(t){return new d(t)}class d{constructor(t){this.eventExecutor=t,v(this,"mbDestructor"),c(t,"Event: eventExecutor")}event(t){return this.mbDestructor=this.eventExecutor(t),this}destroy(){return"function"==typeof this.mbDestructor&&this.mbDestructor?.(),this}}function w(t){return new y(t)}class y{constructor(t){this.transportExecutor=t,c(t,"Transport: transport executor")}use(t){return this.transportExecutor(t),this}}function $(t){return new m(t)}class m{constructor(t){this.executor=t,c(t,"TransportEvent: transport executor")}use(t){return this.executor(t)}}function g(t,...e){return new P(t,e)}class P{constructor(t,e=[],r){this.executor=t,this.args=e,this._child=r,c(t,"TransportParent: executor")}use(t){if(void 0===this._child)throw new Error("no base transport");return this.executor.call(this._child,t,...this.args),this}child(t,...e){return new P(this.executor,[...this.args,...e],t)}}var E=Object.defineProperty,O=(t,e,r)=>((t,e,r)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function T(t){return new j(t)}class j{constructor(t){this.$base=t,O(this,"destroyed",!1),O(this,"transport",g((function(t,e){e.destroyed||this.use(t)}),this)),l(t,"Local: $base")}event(t){return this.$base.event(this.transport.child(t)),this}destroy(){return this}}function x(t){return new V(t)}class V{constructor(t){this.value=t}event(t){return t.use(this.value),this}}function M(){return new z}class z{use(){return this}}var A=Object.defineProperty,C=(t,e,r)=>((t,e,r)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function k(...t){return new F(...t)}class F{constructor(...t){C(this,"known"),C(this,"filled",new Set),C(this,"$events"),C(this,"result",[]),C(this,"transport",g((function(t,e,r){var s,n;e.filled.add(r),e.result[parseInt(r)]=t,s=e.filled,n=e.known,s.size>0&&s.size===n.size&&this.use(e.result)}),this)),this.known=new Set(Object.keys(t)),this.$events=t}event(t){return Object.entries(this.$events).forEach((([e,r])=>{l(r,"All: item"),r.event(this.transport.child(t,e))})),0===this.known.size&&t.use([]),this}}var S=Object.defineProperty,B=(t,e,r)=>((t,e,r)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function D(...t){return new I(...t)}class I{constructor(...t){B(this,"$events"),this.$events=t}event(t){return this.$events.forEach((e=>{l(e,"Any: item"),e.event(t)})),this}}var N=Object.defineProperty,_=(t,e,r)=>((t,e,r)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function L(t,e){return new R(t,e)}class R{constructor(t,e){this.$base=t,this.applier=e,_(this,"transport",g((function(t,e){this.use(e.applier(t))}),this)),l(t,"Applied: base")}event(t){return this.$base.event(this.transport.child(t)),this}}function W(t,e,r){return new q(t,e,r)}class q{constructor(t,e,r){this.$base=t,this.errorMessage=e,this.errorOriginal=r,l(t,"Catch: base"),b(e,"Catch: errorMessage"),void 0!==r&&b(r,"Catch: errorOriginal")}event(t){try{this.$base.event(t)}catch(t){t instanceof Error?this.errorMessage.use(t.message):this.errorMessage.use(String(t)),this.errorOriginal&&this.errorOriginal.use(t)}return this}}var G=Object.defineProperty,H=(t,e,r)=>((t,e,r)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function J(...t){return new K(...t)}class K{constructor(...t){H(this,"$events"),H(this,"$latest"),H(this,"handleEvent",((t,e)=>{const r=this.$events[t],s=this.$events[t+1];r.event(this.oneEventTransport.child(e,s,t))})),H(this,"oneEventTransport",g((function(t,e,r,s){r||(e.$latest=t),e.$latest&&this.use(e.$latest),r&&!e.$latest&&e.handleEvent(s+1,this)}),this)),this.$events=t}event(t){return this.handleEvent(0,t),this}}function Q(t,e){return new U(t,e)}class U{constructor(t,e){this.$base=t,this.applier=e,l(t,"ExecutorApplied: base")}event(t){const e=this.applier(t.use.bind(t));return this.$base.event(w(e)),this}}var X=Object.defineProperty,Y=(t,e,r)=>((t,e,r)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Z(t,e,r){return new tt(t,e,r)}class tt{constructor(t,e,r){this.$base=t,this.predicate=e,this.defaultValue=r,Y(this,"parent",g((function(t,e){e.predicate(t)?this.use(t):void 0!==e.defaultValue&&this.use(e.defaultValue)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var et=Object.defineProperty,rt=(t,e,r)=>((t,e,r)=>e in t?et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function st(t,e,r,s){return new nt(t,e,r,s)}class nt{constructor(t,e,r,s){this.$emitter=t,this.$eventName=e,this.$subscribeMethod=r,this.$unsubscribeMethod=s,rt(this,"lastTransport",null),rt(this,"handler",(t=>{this.lastTransport&&this.lastTransport.use(t)})),rt(this,"parent",g((function([t,e,r],s){s.lastTransport=this,t?.[r]&&t[r](e,s.handler)}),this))}event(t){return k(this.$emitter,this.$eventName,this.$subscribeMethod).event(this.parent.child(t)),this}destroy(){return this.lastTransport=null,this.$unsubscribeMethod?(k(this.$emitter,this.$eventName,this.$unsubscribeMethod).event(w((([t,e,r])=>{t?.[r]?.(e,this.handler)}))),this):this}}function it(t,e){return new ot(t,e)}class ot{constructor(t,e){this.p=t,this.error=e}event(t){return this.p.then((e=>{t.use(e)})).catch((t=>{this.error?.use(t)})),this}}var ut=Object.defineProperty,at=(t,e,r)=>((t,e,r)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function ht(t){return new ct(t)}class ct{constructor(t){this.v=t,at(this,"lateTransport",null),at(this,"notify",(t=>{o(t)&&this.lateTransport&&this.lateTransport.use(t)}))}event(t){if(this.lateTransport)throw new Error("Late component gets new transport, when another was already connected!");return this.lateTransport=t,this.notify(this.v),this}use(t){return this.notify(t),this}}var lt=Object.defineProperty,bt=(t,e,r)=>((t,e,r)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function ft(t){return new vt(t)}class vt{constructor(t){this.$base=t,bt(this,"isFilled",!1),bt(this,"parent",g((function(t,e){e.isFilled||(e.isFilled=!0,this.use(t))}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var pt=Object.defineProperty,dt=(t,e,r)=>((t,e,r)=>e in t?pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);class wt{constructor(){dt(this,"owners"),dt(this,"innerOwner"),this.owners=new Set,this.innerOwner=w((t=>{this.owners.forEach((e=>{e.use(t)}))}))}owner(){return this.innerOwner}size(){return this.owners.size}has(t){return this.owners.has(t)}add(t){return this.owners.add(t),this}remove(t){return this.owners.delete(t),this}destroy(){return this.owners.forEach((t=>{this.remove(t)})),this}}var yt=Object.defineProperty,$t=(t,e,r)=>((t,e,r)=>e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function mt(t,e=!1){return new gt(t,e)}class gt{constructor(t,e=!1){this.$base=t,this.stateless=e,$t(this,"ownersPool",new wt),$t(this,"lastValue"),$t(this,"calls",ht()),$t(this,"firstCallTransport",w((t=>{this.lastValue=t,this.ownersPool.owner().use(t)}))),ft(this.calls).event(w((()=>{this.$base.event(this.firstCallTransport)})))}event(t){return this.calls.use(1),this.stateless||!o(this.lastValue)||this.ownersPool.has(t)||t.use(this.lastValue),this.ownersPool.add(t),this}use(t){return this.calls.use(1),this.lastValue=t,this.ownersPool.owner().use(t),this}touched(){this.calls.use(1)}pool(){return this.ownersPool}destroy(){return this.ownersPool.destroy()}}var Pt=Object.defineProperty,Et=(t,e,r)=>((t,e,r)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Ot(t,e=!1){return new Tt(t,e)}class Tt{constructor(t,e=!1){this.$base=t,Et(this,"$sharedBase"),this.$sharedBase=mt(this.$base,e)}event(t){return this.$sharedBase.event(t),this}use(t){return this.$sharedBase.touched(),this.$base.use(t),this}}var jt=Object.defineProperty,xt=(t,e,r)=>((t,e,r)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Vt(t,e=null){return new Mt(t,e)}class Mt{constructor(t,e=null){this.$base=t,this.theValue=e,xt(this,"touched",!1)}ensureTouched(){this.touched||this.$base.event(w((t=>{this.theValue=t}))),this.touched=!0}[Symbol.toPrimitive](){return this.ensureTouched(),this.theValue}primitive(){return this.ensureTouched(),this.theValue}primitiveWithException(){if(this.ensureTouched(),null===this.theValue)throw new Error("Primitive value is null");return this.theValue}}var zt=Object.defineProperty,At=(t,e,r)=>((t,e,r)=>e in t?zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function Ct(t){return new kt(t)}class kt{constructor(t){At(this,"$event"),At(this,"primitive"),this.$event=Ot(ht(t)),this.primitive=Vt(this,t)}event(t){return this.$event.event(t),this}use(t){return this.$event.use(t),this}value(){return this.primitive}}var Ft=Object.defineProperty,St=(t,e,r)=>((t,e,r)=>e in t?Ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Bt(t,e){return new Dt(t,e)}class Dt{constructor(t,e){this.$base=t,this.$target=e,St(this,"parent",g((function(t,e){const r=[];t.forEach((t=>{let s=t;u(s)||(s=x(s));const n=e.$target.use(s);r.push(n)})),k(...r).event(this)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var It=Object.defineProperty,Nt=(t,e,r)=>((t,e,r)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function _t(t){return new Lt(t)}class Lt{constructor(t){this.$base=t,Nt(this,"result",[]),Nt(this,"parent",g((function(t,e){e.result.push(t),this.use(e.result)}),this))}event(t){return this.$base.event(this.parent.child(t)),this}}var Rt=Object.defineProperty,Wt=(t,e,r)=>((t,e,r)=>e in t?Rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function qt(t){return new Gt(t)}class Gt{constructor(t){this.$base=t,Wt(this,"parent",g((function(t){t.forEach((t=>{this.use(t)}))})))}event(t){return this.$base.event(this.parent.child(t)),this}}function Ht(t,e){return new Jt(t,e)}class Jt{constructor(t,e){this.baseTransport=t,this.applier=e}use(t){return this.applier(this.baseTransport.use(t))}}function Kt(t,e,r=0){return new Qt(t,e,r)}class Qt{constructor(t,e,r=0){this.baseTransport=t,this.args=e,this.startFromArgIndex=r}use(t){return this.baseTransport.use(function(t,e,r){const s=t.slice(0,r);for(;s.length<r;)s.push(void 0);return s.concat(e)}(t,this.args,this.startFromArgIndex))}}var Ut=Object.defineProperty,Xt=(t,e,r)=>((t,e,r)=>e in t?Ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);function Yt(t){return new Zt(t)}class Zt{constructor(t){this.baseTransport=t,Xt(this,"destructors",[])}use(t){const e=this.baseTransport.use(t);return a(e)&&this.destructors.push(e),e}destroy(){return this.destructors.forEach((t=>t.destroy())),this}}var te=Object.defineProperty,ee=(t,e,r)=>((t,e,r)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function re(t){return new se(t)}re.transport={};class se{constructor(t){this.$rpc=t,ee(this,"$result",Ct()),ee(this,"$error",Ct())}result(){return this.$rpc.event(w((t=>{const e=void 0===t.transport?re.transport.default:re.transport[t.transport]||re.transport.default;if(!e)throw new Error(`RPCImpl: Transport not found ${t.transport}`);t.result||(t.result=this.$result),t.error||(t.error=this.$error),e.use(t)}))),this.$result}error(){return this.$error}}function ne(t,e){return Z(t,(t=>t.transport===e))}export{k as All,F as AllEvent,D as Any,I as AnyEvent,L as Applied,R as AppliedEvent,W as Catch,q as CatchEvent,J as Chain,K as ChainEvent,t as Component,e as ComponentClass,n as DestroyContainer,i as DestroyContainerImpl,p as Event,d as EventImpl,Q as ExecutorApplied,U as ExecutorAppliedEvent,Z as Filtered,tt as FilteredEvent,st as FromEvent,nt as FromEventAdapter,it as FromPromise,ot as FromPromiseEvent,ht as Late,ct as LateEvent,Ct as LateShared,kt as LateSharedEvent,T as Local,j as LocalEvent,Bt as Map,Dt as MapEvent,x as Of,V as OfEvent,ft as Once,vt as OnceEvent,wt as OwnerPool,Vt as Primitive,Mt as PrimitiveImpl,re as RPC,se as RPCImpl,ne as RPCOf,_t as Sequence,Lt as SequenceEvent,mt as Shared,gt as SharedEvent,Ot as SharedSource,Tt as SharedSourceEvent,qt as Stream,Gt as StreamEvent,w as Transport,Ht as TransportApplied,Jt as TransportAppliedImpl,Kt as TransportArgs,Qt as TransportArgsImpl,Yt as TransportDestroyable,Zt as TransportDestroyableEvent,$ as TransportEvent,g as TransportParent,P as TransportParentImpl,M as Void,z as VoidImpl,l as ensureEvent,c as ensureFunction,b as ensureTransport,a as isDestroyable,u as isEvent,o as isFilled,h as isTransport};
//# sourceMappingURL=silentium.min.mjs.map
